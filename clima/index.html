<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Futuro Fortissimo - Riepilogo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Import Montserrat font from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    <!-- Favicon -->
    <link rel="icon" href="/index_files/ff.webp" type="image/webp">
    <link rel="apple-touch-icon" href="/index_files/ff.webp">
    <style>
        /* Root variables */
        :root {
            --theme-color: #ADD8E6; /* Light blue */
            --question-color: #B3E5FC; /* Lighter blue */
            --data-color: #81D4FA; /* Medium blue */
            --quote-color: #4FC3F7; /* Darker blue */
            --progress-bar-color: #4CAF50; /* Green */
        }

        /* Basic styles */
        body {
            margin: 0;
            font-family: 'Montserrat', sans-serif;
            background-color: #fff;
            color: #333;
            overflow: hidden; /* Prevent scrolling on body */
        }

        /* App container */
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* Header with logo, buttons, and language switch */
        .header {
            display: flex;
            align-items: center;
            background-color: var(--theme-color);
            padding: 10px;
            flex-shrink: 0;
            flex-wrap: nowrap;
        }

        .logo {
            height: 40px;
            cursor: pointer;
            flex-shrink: 0;
            margin-right: 10px;
        }

        .language-switch {
            background-color: transparent;
            border: none;
            font-size: 24px;
            cursor: pointer;
            flex-shrink: 0;
            margin-left: 10px;
        }

        /* Buttons container inside header */
        .buttons-container {
            display: flex;
            overflow-x: auto;
            flex-grow: 1;
        }

        .buttons-container::-webkit-scrollbar {
            display: none; /* Hide scrollbar */
        }

        /* Buttons */
        .button {
            flex: 0 0 auto;
            margin: 0 5px;
            padding: 8px 12px;
            background-color: #fff;
            color: #333;
            border-radius: 20px;
            text-align: center;
            font-size: 14px;
            cursor: pointer;
            user-select: none;
            white-space: nowrap;
        }

        /* Progress bar */
        .progress-bar {
            height: 5px;
            background-color: var(--progress-bar-color);
            width: 0%;
            transition: width 0.5s ease-in-out;
            flex-shrink: 0;
        }

        /* Cards container */
        .cards-container {
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        /* Cards wrapper for sliding effect */
        .cards-wrapper {
            display: flex;
            height: 100%;
            transition: transform 0.5s ease-in-out;
        }

        /* Individual card */
        .card {
            flex: 0 0 100%;
            height: 100%;
            overflow: hidden;
            background-color: #fff;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
        }

        /* Card content */
        .card-content {
            flex: 1;
            overflow-y: auto;
            padding: 10px 20px 30px 20px; /* Adjusted padding */
            box-sizing: border-box;
            max-width: 450px;
            margin: 0 auto;
        }

        /* Section styles */
        .section-title {
            margin-top: 10px;
            margin-bottom: 10px;
            font-size: 20px;
            font-weight: bold;
        }

        /* Content block */
        .content-block {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 10px;
            word-wrap: break-word; /* Prevent overflow of long words */
            font-size: 16px;
            font-weight: bold;
        }

        .paragraphs {
            background-color: #e0f7fa; /* Light cyan */
            font-weight: normal;
        }

        /* Hide scrollbars on card content */
        .card-content::-webkit-scrollbar {
            width: 0px;
            background: transparent;
        }

        /* Action button styles */
        .action-button {
            padding: 10px 20px;
            margin: 5px 0;
            background-color: var(--theme-color);
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
        }

        .action-button:hover {
            background-color: #7ec0ee; /* Slightly darker blue */
        }

        /* Footer */
        footer {
            text-align: center;
            font-size: 16px;
            font-family: 'Montserrat', sans-serif;
            padding: 10px;
            background-color: #f0f0f0;
        }

        footer a {
            color: #00bef8;
            text-decoration: none;
        }
        /* Content block for darker paragraphs */
      .darkerParagraphs {
          background-color: #b2ebf2; /* Slightly darker cyan */
          font-weight: normal;
          padding: 10px;
          border-radius: 10px;
          margin-bottom: 15px;
      }

      /* Subsection title */
      .subsection-title {
          margin-top: 20px;
          margin-bottom: 10px;
          font-size: 18px;
          font-weight: bold;
      }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header with logo, buttons, and language switch -->
        <div class="header">
            <a href="https://futurofortissimo.github.io/">
                <img src="/index_files/ff.png" alt="Logo" class="logo">
            </a>
            <!-- Buttons inside header -->
            <div class="buttons-container" id="buttons-container">
                <!-- Buttons will be dynamically inserted here -->
            </div>
            <button class="language-switch" id="language-switch">ðŸ‡¬ðŸ‡§</button>
        </div>

        <!-- Progress bar -->
        <div class="progress-bar"></div>

        <!-- Cards -->
        <div class="cards-container">
            <div class="cards-wrapper" id="cards-wrapper">
                <!-- Cards will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <footer>
        <p><a href="https://linktr.ee/micmer">michele merelli</a> per
        <a href="https://fortissimo.substack.com/">futuro fortissimo</a></p>
    </footer>

    <script>
        // Content data in Italian


        // Content data in Italian and English
        const content = {
            it: {
                publications: [
                    {
                        buttonLabel: 'ðŸŽ¼ ff.20 Greta in bici?',
                        urlSlug: '-ff20-greta-in-bici',
                        cards: [
                            {
                                title: 'ðŸŽ¼ ff.20 Greta in bici?',
                                contentBlocks: [
                                    {
                                        type: 'paragraphs',
                                        content: [
                                            '21 metri a testa. Filippine a parte, la buona notizia Ã¨ che anche in Italia si sta muovendo qualcosa. Le ciclabili stanno aumentando in modo lineare. Anche se il dato non Ã¨ aggiornato, si vede che in media nel 2016 ogni persona aveva i suoi 21.1 metri di pista ciclabile pro capite (rispetto ai 13 del 2008). Per quello che la quantitÃ  â€œmetri-di-pista ciclabile-pro-capiteâ€ possa voler dire.'
                                        ]
                                    },
                                    {
                                        type: 'darkerParagraphs',
                                        content: [
                                            'ðŸš² ff.20.1 La rivincita delle biciclette\nNon so se ve ne siete accorti, ma pare che la pandemia ci ha portato piÃ¹ biciclette. Almeno nelle Filippine. Infatti, solo la bici ha visto un incremento nel numero di utenti secondo un sondaggio di World Bank.',
                                            'ðŸ‡®ðŸ‡© ff.20.2 Lâ€™esempio di Jakarta\nSi puÃ² pensare che interventi di rivalorizzazione urbanistici per favorire mobilitÃ  piÃ¹ sostenibile siano fattibili solo su scale ridotte e in cittÃ  â€œcon carta biancaâ€ e poche infrastrutture legate a mezzi di trasporto piÃ¹ tradizionali. Nel 2015, Jakarta aveva circa 3.5 milioni di persone. Ora ne ha piÃ¹ di 10. Quasi nessuno nel 2015 aveva una macchina e solo il 10% della popolazione si muoveva in bici. Nonostante ciÃ², la cittÃ  aveva il peggiore tra traffic del mondo (Roma li-mortacci-tua solo settima). Anche lâ€™aria non era proprio pulitissima. Eppure grazie a una serie di scelte volte a favorire un trasporto pubblico e sostenibile, complice anche il COVID.',
                                            'â›·ï¸ ff.20.3 San Francisco come Cortina\nUn tema degli spostamenti su due ruote Ã¨ la sicurezza, che spaventa molte persone privandole della libertÃ  di scegliere la bicicletta. Questa simpatica mappa di San Francisco riporta, come fossero piste da sci di Cortina, il grado di difficoltÃ  (= pericolositÃ ) delle sue strade. Parlando di â€œstrade sicureâ€, la startup Cowboy ha presentato le sue mappe bike-friendly, andando oltre quelle di Google, spesso poco attente alle esigenze della micromobilitÃ .',
                                            'ðŸš¨ ff.20.4 Simmetrie di Wes Anderson contro i furti\nVi ricordate Van Moof, lâ€™azienda olandese che fa bici elettriche con un design â€œalla Teslaâ€? Ne ho parlato in ðŸŽ¼ ff.5 Elettrizzante. Lâ€™animator di Isle of Dogs, film di Wes Anderson, ha firmato lâ€™ultimo spot dellâ€™azienda, che punta tutto sulla sicurezza delle sue bici. Ãˆ fortissimo!'
                                        ]
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        buttonLabel: 'ðŸŽ¼ ff.5 Elettrizzante!',
                        urlSlug: '-ff5-elettrizzante',
                        cards: [
                            {
                                title: 'ðŸŽ¼ ff.5 Elettrizzante!',
                                contentBlocks: [
                                    {
                                        type: 'paragraphs',
                                        content: [
                                            'Utilitaria a benzina meno inquinante di Tesla? Una promettente start-up olandese, Lightyear One, riporta come non sia tuttâ€™oro, o verde, quello che luccica. Infatti, piccole utilitarie con motori tradizionali inquinano meno di una Tesla model S, considerando lâ€™intero ciclo di vita.'
                                        ]
                                    },
                                    {
                                        type: 'darkerParagraphs',
                                        content: [
                                            'â“ ff.5.1 Non Ã¨ tutto verde quello che luccica\nUtilitaria a benzina meno inquinante di Tesla? Una promettente start-up olandese, Lightyear One, riporta come non sia tuttâ€™oro, o verde, quello che luccica. Infatti, piccole utilitarie con motori tradizionali inquinano meno di una Tesla model S, considerando lâ€™intero ciclo di vita. Lightyear One, va detto, sta spingendo lâ€™ingegneria allâ€™estremo, per aumentare efficienze e distanze di percorrenza. Se prendiamo la media delle efficienze (percorrenze, costi, eccâ€¦) ARK stima che Tesla sia comunque in vantaggio di 3 anni, rispetto ai competitors nella mobilitÃ  elettrica.',
                                            'ðŸ”‹ ff.5.2 Duracell? No, Tesla\nNon solo auto: Con 3 GWh di capacitÃ  (il 25% del totale) Tesla controlla una buona porzione del potenziale di immagazzinamento di energia elettrica nel mondo. E puntano a raggiungere i 1.500 GWh (500x) entro il 2030. Per arrivare a questi numeri ci vorrÃ  tanto litio. Che poi dovremo smaltire. Lâ€™anno scorso, 17.6 GWh di batterie elettriche sono arrivate a fine vita. In 15 anni, queste saranno 10 volte tanto. PiÃ¹ o meno 200 piscine olimpiche (solo considerando le batterie nei veicoli elettrici).',
                                            'ðŸš² ff.5.3 Pedalata assistita\nDurante la pandemia, le bici elettriche hanno venduto piÃ¹ delle auto elettriche (500k bici vs 250k auto negli Stati Uniti). 130 milioni in 3 anni: Un report di Deloitte prevede che tra il 2020 e il 2023 verranno vendute in tutto il mondo 130 milioni di bici elettriche. Con una bici elettrica si pedala il doppio. La percentuale di spostamenti effettuati su due ruote aumenta dal 19 al 50%, se la bici Ã¨ elettrica. Un incremento - sostengono gli autori - slegato allâ€™elemento di novitÃ .',
                                            'ðŸ˜Ž ff.5.4 La Tesla delle biciclette\nSe le bici elettriche sono la prossima frontiera della mobilitÃ , Van Moof Ã¨ la Tesla delle due ruote. Qui sotto il modello V, che raggiungerÃ  i 50 km/h e costerÃ  3500â‚¬:',
                                            'ðŸ§± ff.5.5 Il muro di Marchetti\nAvete visto Squid Game? No? Se passate almeno 30 minuti al giorno per andare/tornare dal lavoro, avreste potuto farlo 15 volte solo questâ€™anno. O guardare 80 film. In media negli Stati Uniti (ma penso che a Milano non sia troppo diversa la situazione), la durata dei viaggi Ã¨ in realtÃ  piÃ¹ lunga: unâ€™ora (un anno e due mesi di vita seduti in macchina). Unâ€™ora costante universale: Nel 1994, il fisico italiano Cesare Marchetti ha osservato che sin dallâ€™antica Roma proprio unâ€™ora Ã¨ il limite massimo sopportabile, per viaggio, prima di cambiare lavoro o trasferirsi piÃ¹ vicino. Zoo di 105 o meno, in duemila anni lâ€™ora di traffico Ã¨ rimasta tale.',
                                            'âš°ï¸ ff.5.6 La pericolositÃ  del traffico, nel mondo\nE mentre siete nel traffico, occhio alla strada. Riportati sotto i tassi di mortalitÃ  suddivisi per regioni nel mondo. A quanto pare in Europa guidiamo benissimo (se non per quelli col cappello). Sapevatelo: Morire in un incidente automobilistico in Asia o in Africa Ã¨ 3 o 4 volte piÃ¹ probabile che in Europa.'
                                        ]
                                    }
                                ]
                            }
                        ]
                    }
                ]
            },
            en: {
                publications: [
                    {
                        buttonLabel: 'ðŸŽ¼ ff.20 Greta on Bikes?',
                        urlSlug: '-ff20-greta-on-bikes',
                        cards: [
                            {
                                title: 'ðŸŽ¼ ff.20 Greta on Bikes?',
                                contentBlocks: [
                                    {
                                        type: 'paragraphs',
                                        content: [
                                            '21 meters per person. Aside from the Philippines, the good news is that something is also happening in Italy. Bike lanes are increasing linearly. Even if the data is not updated, it shows that on average in 2016 each person had 21.1 meters of bike lane per capita (compared to 13 in 2008). For what the quantity â€œmeters-of-bike-lane-per-capitaâ€ may mean.'
                                        ]
                                    },
                                    {
                                        type: 'darkerParagraphs',
                                        content: [
                                            'ðŸš² ff.20.1 The Revenge of Bicycles\nI donâ€™t know if you noticed, but it seems the pandemic brought us more bicycles. At least in the Philippines. In fact, only bikes saw an increase in the number of users according to a World Bank survey.',
                                            'ðŸ‡®ðŸ‡© ff.20.2 The Example of Jakarta\nOne might think that urban revitalization efforts to promote more sustainable mobility are only feasible on a small scale and in cities with â€œblank slatesâ€ and few infrastructures tied to more traditional means of transport. In 2015, Jakarta had about 3.5 million people. Now it has over 10 million. Almost no one in 2015 owned a car and only 10% of the population commuted by bike. Despite this, the city had the worst traffic in the world (Rome ranked only seventh). Even the air quality was not very clean. Yet, thanks to a series of choices aimed at promoting public and sustainable transport, partly due to COVID.',
                                            'â›·ï¸ ff.20.3 San Francisco as Cortina\nA topic regarding two-wheeled transportation is safety, which scares many people away from choosing bicycles. This nice map of San Francisco shows, as if they were ski slopes in Cortina, the level of difficulty (= danger) of its streets. Speaking of â€œsafe streetsâ€, the startup Cowboy has presented its bike-friendly maps, going beyond those of Google, often not attentive to the needs of micromobility.',
                                            'ðŸš¨ ff.20.4 Wes Andersonâ€™s Symmetries Against Theft\nDo you remember Van Moof, the Dutch company that makes electric bikes with a â€œTesla-likeâ€ design? I talked about them in ðŸŽ¼ ff.5 Electrifying! The animator of Isle of Dogs, a Wes Anderson film, signed the companyâ€™s latest ad, which focuses entirely on the safety of its bikes. Itâ€™s awesome!'
                                        ]
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        buttonLabel: 'ðŸŽ¼ ff.5 Electrifying!',
                        urlSlug: '-ff5-electrifying',
                        cards: [
                            {
                                title: 'ðŸŽ¼ ff.5 Electrifying!',
                                contentBlocks: [
                                    {
                                        type: 'paragraphs',
                                        content: [
                                            'Gasoline-powered small cars less polluting than Tesla? A promising Dutch start-up, Lightyear One, reports that not everything that glitters, or is green, is gold. In fact, small utilitarian cars with traditional engines pollute less than a Tesla Model S when considering the entire life cycle.'
                                        ]
                                    },
                                    {
                                        type: 'darkerParagraphs',
                                        content: [
                                            'â“ ff.5.1 Not All That Glitters Is Green\nGasoline-powered small cars less polluting than Tesla? A promising Dutch start-up, Lightyear One, reports that not everything that glitters, or is green, is gold. In fact, small utilitarian cars with traditional engines pollute less than a Tesla Model S when considering the entire life cycle. It must be said that Lightyear One is pushing engineering to the extreme to increase efficiencies and driving ranges. If we take the average efficiencies (range, costs, etc.), ARK estimates that Tesla is still 3 years ahead compared to competitors in electric mobility.',
                                            'ðŸ”‹ ff.5.2 Duracell? No, Tesla\nNot just cars: With 3 GWh of capacity (25% of the total), Tesla controls a good portion of the worldâ€™s electrical energy storage potential. They aim to reach 1,500 GWh (500x) by 2030. Achieving these numbers will require a lot of lithium. Which we will then have to dispose of. Last year, 17.6 GWh of electric batteries reached end-of-life. In 15 years, this will be 10 times as much. Approximately 200 Olympic pools (considering only batteries in electric vehicles).',
                                            'ðŸš² ff.5.3 Assisted Pedaling\nDuring the pandemic, electric bikes sold more than electric cars (500k bikes vs. 250k cars in the United States). 130 million in 3 years: A Deloitte report predicts that between 2020 and 2023, 130 million electric bikes will be sold worldwide. With an electric bike, you pedal twice as much. The percentage of trips made on two wheels increases from 19% to 50% if the bike is electric. An increase â€“ the authors argue â€“ unrelated to the element of novelty.',
                                            'ðŸ˜Ž ff.5.4 The Tesla of Bicycles\nIf electric bikes are the next frontier of mobility, Van Moof is the Tesla of two wheels. Below is the V model, which will reach 50 km/h and cost â‚¬3,500:',
                                            'ðŸ§± ff.5.5 Marchettiâ€™s Wall\nHave you seen Squid Game? No? If you spend at least 30 minutes a day commuting to/from work, you could have done it 15 times just this year. Or watched 80 movies. On average in the United States (but I think the situation in Milan is not too different), the duration of trips is actually longer: one hour (one year and two months of life sitting in a car). A universal constant one-hour limit: In 1994, Italian physicist Cesare Marchetti observed that since ancient Rome, one hour has been the maximum tolerable travel time before changing jobs or moving closer. For over two thousand years, the one-hour traffic limit has remained the same.',
                                            'âš°ï¸ ff.5.6 The Danger of Traffic Worldwide\nAnd while youâ€™re in traffic, watch the road. Below are mortality rates divided by regions worldwide. Apparently, in Europe we drive very well (except for those with hats). Know this: Dying in a car accident in Asia or Africa is 3 or 4 times more likely than in Europe.'
                                        ]
                                    }
                                ]
                            }
                        ]
                    }
                ]
            },
            en: {
                publications: [
                    {
                        buttonLabel: 'ðŸŽ¼ ff.20 Greta on Bikes?',
                        urlSlug: '-ff20-greta-on-bikes',
                        cards: [
                            {
                                title: 'ðŸŽ¼ ff.20 Greta on Bikes?',
                                contentBlocks: [
                                    {
                                        type: 'paragraphs',
                                        content: [
                                            '21 meters per person. Aside from the Philippines, the good news is that something is also happening in Italy. Bike lanes are increasing linearly. Even if the data is not updated, it shows that on average in 2016 each person had 21.1 meters of bike lane per capita (compared to 13 in 2008). For what the quantity â€œmeters-of-bike-lane-per-capitaâ€ may mean.'
                                        ]
                                    },
                                    {
                                        type: 'darkerParagraphs',
                                        content: [
                                            'ðŸš² ff.20.1 The Revenge of Bicycles\nI donâ€™t know if you noticed, but it seems the pandemic brought us more bicycles. At least in the Philippines. In fact, only bikes saw an increase in the number of users according to a World Bank survey.',
                                            'ðŸ‡®ðŸ‡© ff.20.2 The Example of Jakarta\nOne might think that urban revitalization efforts to promote more sustainable mobility are only feasible on a small scale and in cities with â€œblank slatesâ€ and few infrastructures tied to more traditional means of transport. In 2015, Jakarta had about 3.5 million people. Now it has over 10 million. Almost no one in 2015 owned a car and only 10% of the population commuted by bike. Despite this, the city had the worst traffic in the world (Rome ranked only seventh). Even the air quality was not very clean. Yet, thanks to a series of choices aimed at promoting public and sustainable transport, partly due to COVID.',
                                            'â›·ï¸ ff.20.3 San Francisco as Cortina\nA topic regarding two-wheeled transportation is safety, which scares many people away from choosing bicycles. This nice map of San Francisco shows, as if they were ski slopes in Cortina, the level of difficulty (= danger) of its streets. Speaking of â€œsafe streetsâ€, the startup Cowboy has presented its bike-friendly maps, going beyond those of Google, often not attentive to the needs of micromobility.',
                                            'ðŸš¨ ff.20.4 Wes Andersonâ€™s Symmetries Against Theft\nDo you remember Van Moof, the Dutch company that makes electric bikes with a â€œTesla-likeâ€ design? I talked about them in ðŸŽ¼ ff.5 Electrifying! The animator of Isle of Dogs, a Wes Anderson film, signed the companyâ€™s latest ad, which focuses entirely on the safety of its bikes. Itâ€™s awesome!'
                                        ]
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        buttonLabel: 'ðŸŽ¼ ff.5 Electrifying!',
                        urlSlug: '-ff5-electrifying',
                        cards: [
                            {
                                title: 'ðŸŽ¼ ff.5 Electrifying!',
                                contentBlocks: [
                                    {
                                        type: 'paragraphs',
                                        content: [
                                            'Gasoline-powered small cars less polluting than Tesla? A promising Dutch start-up, Lightyear One, reports that not everything that glitters, or is green, is gold. In fact, small utilitarian cars with traditional engines pollute less than a Tesla Model S when considering the entire life cycle.'
                                        ]
                                    },
                                    {
                                        type: 'darkerParagraphs',
                                        content: [
                                            'â“ ff.5.1 Not All That Glitters Is Green\nGasoline-powered small cars less polluting than Tesla? A promising Dutch start-up, Lightyear One, reports that not everything that glitters, or is green, is gold. In fact, small utilitarian cars with traditional engines pollute less than a Tesla Model S when considering the entire life cycle. It must be said that Lightyear One is pushing engineering to the extreme to increase efficiencies and driving ranges. If we take the average efficiencies (range, costs, etc.), ARK estimates that Tesla is still 3 years ahead compared to competitors in electric mobility.',
                                            'ðŸ”‹ ff.5.2 Duracell? No, Tesla\nNot just cars: With 3 GWh of capacity (25% of the total), Tesla controls a good portion of the worldâ€™s electrical energy storage potential. They aim to reach 1,500 GWh (500x) by 2030. Achieving these numbers will require a lot of lithium. Which we will then have to dispose of. Last year, 17.6 GWh of electric batteries reached end-of-life. In 15 years, this will be 10 times as much. Approximately 200 Olympic pools (considering only batteries in electric vehicles).',
                                            'ðŸš² ff.5.3 Assisted Pedaling\nDuring the pandemic, electric bikes sold more than electric cars (500k bikes vs. 250k cars in the United States). 130 million in 3 years: A Deloitte report predicts that between 2020 and 2023, 130 million electric bikes will be sold worldwide. With an electric bike, you pedal twice as much. The percentage of trips made on two wheels increases from 19% to 50% if the bike is electric. An increase â€“ the authors argue â€“ unrelated to the element of novelty.',
                                            'ðŸ˜Ž ff.5.4 The Tesla of Bicycles\nIf electric bikes are the next frontier of mobility, Van Moof is the Tesla of two wheels. Below is the V model, which will reach 50 km/h and cost â‚¬3,500:',
                                            'ðŸ§± ff.5.5 Marchettiâ€™s Wall\nHave you seen Squid Game? No? If you spend at least 30 minutes a day commuting to/from work, you could have done it 15 times just this year. Or watched 80 movies. On average in the United States (but I think the situation in Milan is not too different), the duration of trips is actually longer: one hour (one year and two months of life sitting in a car). A universal constant one-hour limit: In 1994, Italian physicist Cesare Marchetti observed that since ancient Rome, one hour has been the maximum tolerable travel time before changing jobs or moving closer. For over two thousand years, the one-hour traffic limit has remained the same.',
                                            'âš°ï¸ ff.5.6 The Danger of Traffic Worldwide\nAnd while youâ€™re in traffic, watch the road. Below are mortality rates divided by regions worldwide. Apparently, in Europe we drive very well (except for those with hats). Know this: Dying in a car accident in Asia or Africa is 3 or 4 times more likely than in Europe.'
                                        ]
                                    }
                                ]
                            }
                        ]
                    }
                ]
            }
        };



let currentLanguage = 'it';
let currentIndex = 0;
let publicationIndices = [];

const buttonsContainer = document.getElementById('buttons-container');
const cardsWrapper = document.getElementById('cards-wrapper');
const progressBar = document.querySelector('.progress-bar');
const languageSwitch = document.getElementById('language-switch');

let cards = [];

function initializeApp() {
buttonsContainer.innerHTML = '';
cardsWrapper.innerHTML = '';
cards = [];
currentIndex = 0;

const { publications } = content[currentLanguage];

let cardIndex = 0;
publicationIndices = [];

publications.forEach((publication) => {
    createButton(publication.buttonLabel, cardIndex);
    publicationIndices.push(cardIndex);
    publication.cards.forEach(cardData => {
        createCard(cardData);
        cardIndex++;
    });
});

// Add a sentinel value for the end
publicationIndices.push(cardIndex);

showCard(0);
}

function createButton(label, index) {
const button = document.createElement('div');
button.className = 'button';
button.textContent = label;
button.addEventListener('click', () => {
    showCard(index);
});
buttonsContainer.appendChild(button);
}

function createCard(cardData) {
const card = document.createElement('div');
card.className = 'card';

const cardContent = document.createElement('div');
cardContent.className = 'card-content';

const title = document.createElement('h2');
title.className = 'section-title';
title.textContent = cardData.title;
cardContent.appendChild(title);

cardData.contentBlocks.forEach(block => {
    const contentBlock = createContentBlock(block.type, block.content);
    cardContent.appendChild(contentBlock);
});

card.appendChild(cardContent);

cardsWrapper.appendChild(card);
cards.push(card);
}

function createContentBlock(type, contents) {
    const div = document.createElement('div');
    div.className = `content-block ${type}`;

    contents.forEach(item => {
        // Split the item into title and content at the first newline
        const [title, ...rest] = item.split('\n');
        const contentText = rest.join('\n').trim();

        const p = document.createElement('p');

        // Create a bold element for the title
        const boldTitle = document.createElement('strong');
        boldTitle.textContent = title.trim();

        // Append the bold title to the paragraph
        p.appendChild(boldTitle);

        if (contentText) {
            // Add a line break
            p.appendChild(document.createElement('br'));

            // Create a text node for the content
            const contentNode = document.createTextNode(contentText);
            p.appendChild(contentNode);
        }

        div.appendChild(p);
    });

    return div;
}
        // Function to create the book details card
        function createBookCard(bookDetails) {
            const card = document.createElement('div');
            card.className = 'card';

            const cardContent = document.createElement('div');
            cardContent.className = 'card-content book-details';

            const buyText = currentLanguage === 'it' ? 'ðŸ“– Acquista il libro' : 'ðŸ“– Buy this book';
            const coffeeText = currentLanguage === 'it' ? 'â˜• Offrimi un caffÃ¨' : 'â˜• Buy me a coffee';
            const authorText = currentLanguage === 'it' ? 'Autore' : 'Author';
            const yearText = currentLanguage === 'it' ? 'Anno' : 'Year';
            const pagesText = currentLanguage === 'it' ? 'Pagine' : 'Pages';

            cardContent.innerHTML = `
                <img src="${bookDetails.image}" alt="Book Cover" style="width:100%; height:auto; border-radius: 10px;">
                <h2>${bookDetails.title}</h2>
                <p>${authorText}: ${bookDetails.author}</p>
                <p>${yearText}: ${bookDetails.year}</p>
                <p>${pagesText}: ${bookDetails.pages}</p>
                <button class="action-button" onclick="window.open('${bookDetails.link}', '_blank')">${buyText}</button>
                <button class="action-button" onclick="window.open('${bookDetails.offerCoffeeLink}', '_blank')">${coffeeText}</button>
            `;

            card.appendChild(cardContent);

            cardsWrapper.appendChild(card);
            cards.push(card);
        }

        // Function to display a specific card
        function showCard(index) {
            currentIndex = index;
            cardsWrapper.style.transform = `translateX(-${index * 100}%)`;
            const progress = ((index + 1) / cards.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // Swipe functionality
        let startX = 0;
        let isDown = false;

        const cardsContainer = document.querySelector('.cards-container');

        // Touch events for mobile
        cardsContainer.addEventListener('touchstart', touchStart, false);
        cardsContainer.addEventListener('touchmove', touchMove, false);
        cardsContainer.addEventListener('touchend', touchEnd, false);

        function touchStart(evt) {
            startX = evt.touches[0].clientX;
            isDown = true;
            cardsWrapper.style.transition = 'none';
        }

        function touchMove(evt) {
            if (!isDown) return;
            const x = evt.touches[0].clientX;
            const deltaX = x - startX;
            const percentage = (deltaX / window.innerWidth) * 100;
            const offset = -currentIndex * 100 + percentage;
            cardsWrapper.style.transform = `translateX(${offset}%)`;
        }

        function touchEnd(evt) {
            if (!isDown) return;
            isDown = false;
            const endX = evt.changedTouches[0].clientX;
            const deltaX = endX - startX;
            if (deltaX < -50 && currentIndex < cards.length - 1) {
                currentIndex++;
            } else if (deltaX > 50 && currentIndex > 0) {
                currentIndex--;
            }
            cardsWrapper.style.transition = 'transform 0.5s ease-in-out';
            showCard(currentIndex);
        }

        // Mouse events for desktop
        cardsContainer.addEventListener('mousedown', mouseDown, false);
        cardsContainer.addEventListener('mousemove', mouseMove, false);
        cardsContainer.addEventListener('mouseup', mouseUp, false);
        cardsContainer.addEventListener('mouseleave', mouseUp, false);

        function mouseDown(evt) {
            startX = evt.clientX;
            isDown = true;
            cardsWrapper.style.transition = 'none';
        }

        function mouseMove(evt) {
            if (!isDown) return;
            const x = evt.clientX;
            const deltaX = x - startX;
            const percentage = (deltaX / window.innerWidth) * 100;
            const offset = -currentIndex * 100 + percentage;
            cardsWrapper.style.transform = `translateX(${offset}%)`;
        }

        function mouseUp(evt) {
            if (!isDown) return;
            isDown = false;
            const endX = evt.clientX;
            const deltaX = endX - startX;
            if (deltaX < -50 && currentIndex < cards.length - 1) {
                currentIndex++;
            } else if (deltaX > 50 && currentIndex > 0) {
                currentIndex--;
            }
            cardsWrapper.style.transition = 'transform 0.5s ease-in-out';
            showCard(currentIndex);
        }

        // Language switch functionality
        languageSwitch.addEventListener('click', () => {
            currentLanguage = currentLanguage === 'it' ? 'en' : 'it';
            languageSwitch.textContent = currentLanguage === 'it' ? 'ðŸ‡¬ðŸ‡§' : 'ðŸ‡®ðŸ‡¹';
            initializeApp();
        });

        // Initialize the app after the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            initializeApp();
        });
    </script>
</body>
</html>
