<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Futuro Fortissimo Michele Merelli</title>

    <!-- Google Fonts for Modern Typography -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

    <!-- Swiper CSS for Sliders -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">

    <!-- Favicon and Manifest -->
    <link rel="icon" href="/index_files/ff.webp" type="image/webp">
    <link rel="apple-touch-icon" href="/index_files/ff.webp">
    <link rel="manifest" href="/index_files/manifest.json">

    <!-- Google Tag Manager -->
    <script>
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:''; j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-NFZJWGL2');
    </script>
    <!-- End Google Tag Manager -->

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NQ7MQR0VL8"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-NQ7MQR0VL8');
    </script>

    <!-- Swiper JS -->
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

    <!-- jQuery (Optional) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Custom JavaScript -->
    <script src="script.js" defer></script>

    <!-- Inline Styles (if any) -->
    <style>
        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f8f8f2; /* Off-white background */
            color: #333;
            overflow-x: hidden; /* Prevent horizontal scroll */
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        /* Header Styles */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            height: 70px;
            background-color: #ffffff;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        header a {
            font-size: 24px;
            font-family: 'Playfair Display', serif;
            color: #333;
        }

        /* Main Container */
        .container {
            padding-top: 80px; /* Space for fixed header */
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Image Slider Section */
        .image-slider-section {
            margin-bottom: 30px;
        }

        .image-slider-section .swiper-container {
            width: 100%;
            height: 300px; /* Adjust as needed */
        }

        .image-slider-section .swiper-slide {
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            cursor: pointer;
        }

        .image-slider-section .swiper-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .image-slider-section .swiper-slide:hover img {
            transform: scale(1.05);
        }

        .image-slider-section .swiper-slide .image-overlay {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.6);
            color: #fff;
            padding: 10px;
            border-radius: 5px;
            font-family: 'Playfair Display', serif;
        }

        /* Adjusted Image Box */
        .image-box {
            height: 200px; /* Reduced to 2/3 of previous height (assuming original was 300px) */
            background-color: #eaeaea;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            cursor: pointer;
        }

        .image-box .my-text-container {
            position: absolute;
            bottom: 10px;
            left: 10px;
            color: #fff;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
        }

        .image-box .post-title {
            font-size: 20px;
            font-family: 'Playfair Display', serif;
            margin-bottom: 5px;
        }

        .image-box .post-subtitle {
            font-size: 16px;
        }

        /* Button Containers */
        .button-container {
            text-align: center;
            font-size: 21px;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .button-container a {
            color: black;
            text-decoration: none;
            font-weight: bold;
            margin: 0 10px;
            border: 2px solid black;
            padding: 10px 20px;
            border-radius: 25px;
            transition: background-color 0.3s, color 0.3s;
        }

        .button-container a:hover {
            background-color: black;
            color: white;
        }

        /* Swiper Pagination Customization */
        .swiper-pagination-bullet-active {
            background-color: #007BFF;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .image-slider-section .swiper-container {
                height: 200px;
            }

            .image-box {
                height: 150px;
            }

            .button-container a {
                padding: 8px 16px;
                margin: 5px;
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NFZJWGL2"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- Header -->
    <header>
        <a href="https://futurofortissimo.github.io/">futuro fortissimo</a>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Image Slider Section -->
        <div class="image-slider-section">
            <div class="swiper-container mySwiperImages">
                <div class="swiper-wrapper" id="image-slider-wrapper">
                    <!-- Slides will be dynamically inserted here -->
                </div>
                <!-- Add Pagination -->
                <div class="swiper-pagination"></div>
                <!-- Add Navigation -->
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>
        </div>

        <!-- Button Containers -->
        <div class="button-container mb-3 font-palladio">
            <a href="https://www.notion.so/micmer/39914179f6d14c54b7a5b56e06da272a?v=b269619d858443dc9d52050b02ada0ed">Libri üìö</a>
            <a href="https://futurofortissimo.github.io/strumenti.html">Strumenti üõ†Ô∏è</a>
            <a href="https://futurofortissimo.github.io/note.html">Note üéµ</a>
        </div>

        <div class="button-container mb-3 font-palladio">
            <a href="https://www.paypal.com/paypalme/michelemerelli">Supporta üç©</a>
            <a href="https://api.whatsapp.com/send?text=https://futurofortissimo.github.io">Condividi üìß</a>
        </div>

        <!-- Image Box Slider -->
        <div class="image-box-slider-section">
            <div class="swiper-container mySwiperImageBoxes">
                <div class="swiper-wrapper" id="image-box-slider-wrapper">
                    <!-- Image Boxes will be dynamically inserted here -->
                </div>
                <!-- Add Pagination -->
                <div class="swiper-pagination"></div>
                <!-- Add Navigation -->
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>
        </div>
    </div>

    <!-- Custom Scripts -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Swiper for Images Slider
            var imagesSwiper = new Swiper('.mySwiperImages', {
                slidesPerView: 1,
                spaceBetween: 10,
                loop: true,
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true,
                },
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                autoplay: {
                    delay: 5000,
                    disableOnInteraction: false,
                },
            });

            // Initialize Swiper for Image Boxes Slider
            var imageBoxesSwiper = new Swiper('.mySwiperImageBoxes', {
                slidesPerView: 3,
                spaceBetween: 20,
                loop: true,
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true,
                },
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                breakpoints: {
                    640: {
                        slidesPerView: 1,
                        spaceBetween: 10,
                    },
                    768: {
                        slidesPerView: 2,
                        spaceBetween: 15,
                    },
                    1024: {
                        slidesPerView: 3,
                        spaceBetween: 20,
                    },
                },
                autoplay: {
                    delay: 5000,
                    disableOnInteraction: false,
                },
            });

            // Function to fetch and populate images
            function loadImages() {
                fetch('/index_files/notes_ff_michele_merelli_2024_futuro_fortissimo.csv')
                    .then(response => response.text())
                    .then(csvText => {
                        const data = parseCSV(csvText);
                        populateImageSlider(data.slice(0, 5)); // Load first 5 images
                        populateImageBoxSlider(data.slice(0, 5)); // Load first 5 image boxes
                    })
                    .catch(error => console.error('Error loading the CSV file:', error));
            }

            // Parse CSV into array of objects
            function parseCSV(csvText) {
                const lines = csvText.trim().split('\n');
                const headers = lines[0].split(',');

                if (headers.length === 0) {
                    console.error("Error: CSV file is missing headers.");
                    return [];
                }

                return lines.slice(1).map((line, index) => {
                    const values = line.split(',');

                    if (values.length !== headers.length) {
                        console.warn(`Warning: Skipping row ${index + 2} due to column mismatch.`);
                        return null;
                    }

                    let obj = {};
                    headers.forEach((header, idx) => {
                        const value = values[idx] ? values[idx].trim() : '';
                        obj[header.trim()] = value;
                    });
                    return obj;
                }).filter(row => row !== null);
            }

            // Populate Image Slider
            function populateImageSlider(data) {
                const sliderWrapper = document.getElementById('image-slider-wrapper');
                data.forEach(item => {
                    const slide = document.createElement('div');
                    slide.classList.add('swiper-slide');

                    const img = document.createElement('img');
                    img.src = item['ImageURL'] || 'https://via.placeholder.com/600x300'; // Fallback image
                    img.alt = item['Title'] || 'Image Slide';

                    const overlay = document.createElement('div');
                    overlay.classList.add('image-overlay');
                    overlay.textContent = item['Title'] || 'No Title';

                    slide.appendChild(img);
                    slide.appendChild(overlay);
                    sliderWrapper.appendChild(slide);
                });
                imagesSwiper.update(); // Update Swiper after adding slides
            }

            // Populate Image Boxes Slider
            function populateImageBoxSlider(data) {
                const boxSliderWrapper = document.getElementById('image-box-slider-wrapper');
                data.forEach(item => {
                    const slide = document.createElement('div');
                    slide.classList.add('swiper-slide');

                    const imageBox = document.createElement('a');
                    imageBox.href = item['URL'] || '#';
                    imageBox.classList.add('image-box');

                    const textContainer = document.createElement('div');
                    textContainer.classList.add('my-text-container');

                    const postTitle = document.createElement('div');
                    postTitle.classList.add('post-title');
                    postTitle.textContent = item['Title'] || 'No Title';

                    const postSubtitle = document.createElement('div');
                    postSubtitle.classList.add('post-subtitle');
                    postSubtitle.textContent = item['Subtitle'] || 'No Subtitle';

                    const list = document.createElement('ul');
                    const linkItem = document.createElement('li');
                    const link = document.createElement('a');
                    link.href = item['URL'] || '#';
                    link.textContent = 'Read More';
                    link.style.color = '#fff';
                    link.style.textDecoration = 'underline';
                    linkItem.appendChild(link);
                    list.appendChild(linkItem);

                    textContainer.appendChild(postTitle);
                    textContainer.appendChild(postSubtitle);
                    textContainer.appendChild(list);

                    imageBox.appendChild(textContainer);
                    slide.appendChild(imageBox);
                    boxSliderWrapper.appendChild(slide);
                });
                imageBoxesSwiper.update(); // Update Swiper after adding slides
            }

            // Load Images on Page Load
            loadImages();
        });
    </script>

    <!-- Optional Inline Styles for Swiper Navigation Buttons -->
    <style>
        .swiper-button-next,
        .swiper-button-prev {
            color: #007BFF;
        }
    </style>
</body>
</html>
