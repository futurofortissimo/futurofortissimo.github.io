<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Blinkist-like App - Final Version</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Import Montserrat font from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap">
    <style>
        /* Root variables */
        :root {
            --theme-color: #ADD8E6; /* Light blue */
            --question-color: #B3E5FC; /* Lighter blue */
            --data-color: #81D4FA; /* Medium blue */
            --quote-color: #4FC3F7; /* Darker blue */
        }

        /* Basic styles */
        body {
            margin: 0;
            font-family: 'Montserrat', sans-serif;
            background-color: #fff;
            color: #333;
            height: 100vh;
            overflow: hidden;
        }

        /* App container */
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* Buttons container */
        .buttons-container {
            display: flex;
            align-items: center;
            overflow-x: auto;
            background-color: var(--theme-color);
            padding: 5px;
            flex-shrink: 0;
        }

        .buttons-container::-webkit-scrollbar {
            display: none; /* Hide scrollbar */
        }

        /* Buttons */
        .button {
            flex: 0 0 auto;
            margin: 5px;
            padding: 8px 12px;
            background-color: #fff;
            color: #333;
            border-radius: 20px;
            text-align: center;
            font-size: 14px;
            cursor: pointer;
            user-select: none;
            white-space: nowrap;
            display: flex;
            align-items: center;
        }

        .button img {
            height: 24px;
            margin-right: 5px;
        }

        /* Cards container */
        .cards-container {
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        /* Cards wrapper for sliding effect */
        .cards-wrapper {
            display: flex;
            transition: transform 0.5s ease-in-out;
            height: calc(100% - 40px); /* Adjust for progress bar */
        }

        /* Individual card */
        .card {
            flex: 0 0 100%;
            display: flex;
            flex-direction: column;
        }

        /* Card header */
        .card-header {
            background-color: var(--theme-color);
            padding: 10px;
            flex-shrink: 0;
        }

        .card-header h2 {
            margin: 0;
            font-size: 18px;
            color: #fff;
        }

        /* Card content */
        .card-content {
            flex: 1;
            overflow-y: auto;
            padding: 10px 15px;
            box-sizing: border-box;
        }

        /* Content blocks */
        .content-block {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 10px;
            font-size: 1em;
        }

        .questions {
            background-color: var(--question-color);
        }

        .data {
            background-color: var(--data-color);
        }

        .quotes {
            background-color: var(--quote-color);
        }

        /* Progress bar */
        .progress-bar {
            height: 5px;
            background-color: var(--theme-color);
            width: 0%;
            transition: width 0.5s ease-in-out;
            flex-shrink: 0;
        }

        /* "Offer me a coffee" button */
        .coffee-button {
            display: block;
            margin: 20px auto 0;
            padding: 10px 20px;
            background-color: var(--theme-color);
            color: #fff;
            border: none;
            border-radius: 20px;
            font-size: 16px;
            cursor: pointer;
            text-align: center;
        }

        /* Responsive font sizes */
        @media (max-height: 700px) {
            .card-header h2 {
                font-size: 16px;
            }
            .content-block {
                font-size: 0.9em;
            }
        }

        @media (max-height: 600px) {
            .card-header h2 {
                font-size: 14px;
            }
            .content-block {
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Buttons -->
        <div class="buttons-container" id="buttons-container">
            <!-- Buttons will be dynamically inserted here -->
        </div>

        <!-- Cards -->
        <div class="cards-container">
            <div class="cards-wrapper" id="cards-wrapper">
                <!-- Cards will be dynamically inserted here -->
            </div>
        </div>

        <!-- Progress bar -->
        <div class="progress-bar"></div>
    </div>

    <script>
        // Content data in English and Italian
        const content = {
            en: {
                chapters: [
                    {
                        title: 'The Nature of Money',
                        buttonLabel: 'ðŸ’° Money',
                        cards: [
                            {
                                type: 'questions',
                                content: [
                                    'What are the limitations of barter?',
                                    'What characteristics define good money?',
                                    'How do different monetary systems impact societal development?'
                                ]
                            },
                            {
                                type: 'data',
                                content: [
                                    'Copper demand is around 20 million tons per year at $5,000 per ton, totaling approximately $100 billion market value.',
                                    'Central banks hold about 20% of global gold stockpiles.'
                                ]
                            },
                            {
                                type: 'quotes',
                                content: [
                                    'Barter is impractical and typically used only among familiar people in exceptional circumstances.',
                                    'Successful money has mechanisms to restrict new supply, maintaining its value over time.',
                                    'Advancements have evolved money from seashells to digital forms, each with benefits and pitfalls.'
                                ]
                            }
                        ]
                    },
                    // Include other chapters with their respective cards...
                ],
                bookDetails: {
                    image: 'https://via.placeholder.com/150', // Placeholder image
                    title: 'The Bitcoin Standard',
                    author: 'Saifedean Ammous',
                    year: '2018',
                    pages: '304',
                    link: 'https://example.com/buy',
                    offerCoffeeLink: 'https://example.com/coffee'
                }
            },
            it: {
                chapters: [
                    {
                        title: 'La Natura del Denaro',
                        buttonLabel: 'ðŸ’° Denaro',
                        cards: [
                            {
                                type: 'questions',
                                content: [
                                    'Quali sono i limiti del baratto?',
                                    'Quali caratteristiche definiscono un buon denaro?',
                                    'Come diversi sistemi monetari influenzano lo sviluppo sociale?'
                                ]
                            },
                            {
                                type: 'data',
                                content: [
                                    'La domanda di rame Ã¨ circa 20 milioni di tonnellate all\'anno a $5.000 per tonnellata, per un valore di mercato di circa $100 miliardi.',
                                    'Le banche centrali detengono circa il 20% delle riserve globali di oro.'
                                ]
                            },
                            {
                                type: 'quotes',
                                content: [
                                    'Il baratto Ã¨ impratico e tipicamente usato solo tra persone familiari in circostanze eccezionali.',
                                    'Un denaro di successo ha meccanismi per limitare la nuova offerta, mantenendo il suo valore nel tempo.',
                                    'I progressi hanno evoluto il denaro da conchiglie a forme digitali, ognuna con benefici e insidie.'
                                ]
                            }
                        ]
                    },
                    // Include other chapters translated into Italian...
                ],
                bookDetails: {
                    image: 'https://via.placeholder.com/150', // Placeholder image
                    title: 'Lo Standard Bitcoin',
                    author: 'Saifedean Ammous',
                    year: '2018',
                    pages: '304',
                    link: 'https://example.com/buy',
                    offerCoffeeLink: 'https://example.com/coffee'
                }
            }
        };

        let currentLanguage = 'en';

        // Get DOM elements
        const buttonsContainer = document.getElementById('buttons-container');
        const cardsWrapper = document.getElementById('cards-wrapper');
        const progressBar = document.querySelector('.progress-bar');

        let cards = [];
        let currentIndex = 0;

        function initializeApp() {
            buttonsContainer.innerHTML = '';
            cardsWrapper.innerHTML = '';
            cards = [];
            currentIndex = 0;

            const { chapters, bookDetails } = content[currentLanguage];

            // Create home button
            const homeButton = document.createElement('a');
            homeButton.href = 'main_page.html';
            homeButton.className = 'button';
            homeButton.innerHTML = '<img src="logo.png" alt="Logo">';
            buttonsContainer.appendChild(homeButton);

            // Create language switch button
            const languageButton = document.createElement('div');
            languageButton.className = 'button';
            languageButton.textContent = currentLanguage === 'en' ? 'ðŸ‡®ðŸ‡¹ IT' : 'ðŸ‡¬ðŸ‡§ EN';
            languageButton.addEventListener('click', () => {
                currentLanguage = currentLanguage === 'en' ? 'it' : 'en';
                initializeApp();
            });
            buttonsContainer.appendChild(languageButton);

            // Create buttons and cards for chapters
            chapters.forEach((chapter, chapterIndex) => {
                createButton(chapter.buttonLabel, chapterIndex * 3);
                chapter.cards.forEach((cardContent, cardIndex) => {
                    createCard(chapter.title, cardContent);
                });
            });

            // Create "Book Details" button and card
            createButton('ðŸ“– Details', cards.length);
            createBookCard(bookDetails);

            // Initialize to show the first card
            showCard(0);
        }

        // Function to create a button
        function createButton(label, index) {
            const button = document.createElement('div');
            button.className = 'button';
            button.textContent = label;
            button.addEventListener('click', () => {
                showCard(index);
            });
            buttonsContainer.appendChild(button);
        }

        // Function to create a card
        function createCard(title, contentBlockData) {
            const card = document.createElement('div');
            card.className = 'card';

            // Card header with title
            const cardHeader = document.createElement('div');
            cardHeader.className = 'card-header';
            const headerTitle = document.createElement('h2');
            headerTitle.textContent = title;
            cardHeader.appendChild(headerTitle);

            // Card content
            const cardContent = document.createElement('div');
            cardContent.className = 'card-content';

            const contentBlock = createContentBlock(contentBlockData.type, contentBlockData.content);
            cardContent.appendChild(contentBlock);

            card.appendChild(cardHeader);
            card.appendChild(cardContent);

            cardsWrapper.appendChild(card);
            cards.push(card);
        }

        // Function to create a content block
        function createContentBlock(type, contents) {
            const div = document.createElement('div');
            div.className = `content-block ${type}`;

            contents.forEach(item => {
                const p = document.createElement('p');
                p.textContent = item;
                div.appendChild(p);
            });

            return div;
        }

        // Function to create the book details card
        function createBookCard(bookDetails) {
            const card = document.createElement('div');
            card.className = 'card';

            // Card header
            const cardHeader = document.createElement('div');
            cardHeader.className = 'card-header';
            const headerTitle = document.createElement('h2');
            headerTitle.textContent = bookDetails.title;
            cardHeader.appendChild(headerTitle);

            // Card content
            const cardContent = document.createElement('div');
            cardContent.className = 'card-content';

            cardContent.innerHTML = `
                <img src="${bookDetails.image}" alt="Book Cover" style="width:100%; height:auto; border-radius: 10px;">
                <p><strong>${currentLanguage === 'en' ? 'Author' : 'Autore'}:</strong> ${bookDetails.author}</p>
                <p><strong>${currentLanguage === 'en' ? 'Year' : 'Anno'}:</strong> ${bookDetails.year}</p>
                <p><strong>${currentLanguage === 'en' ? 'Pages' : 'Pagine'}:</strong> ${bookDetails.pages}</p>
                <p><a href="${bookDetails.link}" target="_blank">${currentLanguage === 'en' ? 'Buy this book' : 'Acquista il libro'}</a></p>
            `;

            const coffeeButton = document.createElement('button');
            coffeeButton.className = 'coffee-button';
            coffeeButton.textContent = currentLanguage === 'en' ? 'â˜• Offer me a coffee' : 'â˜• Offrimi un caffÃ¨';
            coffeeButton.addEventListener('click', () => {
                window.open(bookDetails.offerCoffeeLink, '_blank');
            });

            cardContent.appendChild(coffeeButton);
            card.appendChild(cardHeader);
            card.appendChild(cardContent);

            cardsWrapper.appendChild(card);
            cards.push(card);
        }

        // Function to display a specific card
        function showCard(index) {
            currentIndex = index;
            cardsWrapper.style.transform = `translateX(-${index * 100}%)`;
            const progress = ((index + 1) / cards.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // Swipe functionality
        let startX = 0;
        let currentX = 0;
        let isDragging = false;

        const cardsContainer = document.querySelector('.cards-container');

        cardsContainer.addEventListener('touchstart', touchStart, false);
        cardsContainer.addEventListener('touchmove', touchMove, false);
        cardsContainer.addEventListener('touchend', touchEnd, false);

        function touchStart(evt) {
            startX = evt.touches[0].clientX;
            isDragging = true;
        }

        function touchMove(evt) {
            if (!isDragging) return;
            currentX = evt.touches[0].clientX;
            const deltaX = currentX - startX;
            cardsWrapper.style.transition = 'none';
            cardsWrapper.style.transform = `translateX(${ -currentIndex * window.innerWidth + deltaX }px)`;
        }

        function touchEnd(evt) {
            if (!isDragging) return;
            isDragging = false;
            const deltaX = currentX - startX;
            if (deltaX < -50 && currentIndex < cards.length - 1) {
                currentIndex++;
            } else if (deltaX > 50 && currentIndex > 0) {
                currentIndex--;
            }
            cardsWrapper.style.transition = 'transform 0.5s ease-in-out';
            showCard(currentIndex);
        }

        // Initialize the app
        initializeApp();
    </script>
</body>
</html>