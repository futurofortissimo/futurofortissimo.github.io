<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>futuro fortissimo | ❤️ Società, Benessere, Tecnologia e Innovazione</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Import Montserrat font from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">

    <!-- Favicon -->
    <link rel="icon" href="/index_files/ff.webp" type="image/webp">
    <link rel="apple-touch-icon" href="/index_files/ff.webp">

    <!-- Meta Tags -->
    <meta name="description" content="Esplora il futuro con futuro fortissimo: società, benessere, tecnologia, innovazione, salute mentale, stress, COVID-19, intelligenza artificiale, sport, alimentazione, obesità, longevità. Scopri le ultime tendenze e insights su società e tecnologia in italiano e inglese.">
    <meta name="keywords" content="futuro fortissimo, società, benessere, tecnologia, innovazione, salute mentale, stress, COVID-19, intelligenza artificiale, sport, alimentazione, obesità, longevità, future trends, wellness, mental health, AI, nutrition, longevity, Italian blog, English blog">
    <meta name="author" content="futuro fortissimo michele merelli">

    <!-- Stylesheet -->
    <style>
        /* Root variables */
        :root {
            --theme-color: #ADD8E6; /* Light blue */
            --button-bg-color: #fff;
            --button-text-color: #333;
            --progress-bar-color: #4CAF50; /* Green */
            --button-hover-scale: 1.05;
            --button-transition: transform 0.2s ease-in-out;
            --font-family: 'Montserrat', sans-serif;
        }

        /* Global styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: var(--font-family);
        }

        body {
            background-color: #fff;
            color: #333;
            overflow-x: hidden;
        }

        a {
            color: inherit;
            text-decoration: none;
        }

        /* Container */
        .app-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background-color: var(--theme-color);
            padding: 10px;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo {
            height: 40px;
            cursor: pointer;
            margin-right: 10px;
        }

        nav {
            display: flex;
            flex-wrap: nowrap;
            overflow-x: auto;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE 10+ */
            flex-grow: 1;
        }

        nav::-webkit-scrollbar {
            display: none; /* Chrome, Safari */
        }

        .nav-button {
            flex: 0 0 auto;
            margin: 0 5px;
            padding: 8px 16px;
            background-color: var(--button-bg-color);
            color: var(--button-text-color);
            border-radius: 20px;
            text-align: center;
            font-size: 14px;
            cursor: pointer;
            user-select: none;
            white-space: nowrap;
            transition: var(--button-transition);
        }

        .nav-button:hover {
            transform: scale(var(--button-hover-scale));
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        /* Progress Bar */
        .progress-bar {
            height: 5px;
            background-color: var(--progress-bar-color);
            width: 0%;
            transition: width 0.5s ease-in-out;
        }

        /* Main Content */
        main {
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        .cards-wrapper {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }

        .card {
            flex: 0 0 100%;
            overflow-y: auto;
            padding: 20px;
            background-color: #fff;
        }

        .card-content {
            max-width: 600px;
            margin: 0 auto;
        }

        .section-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .content-block {
            margin-bottom: 20px;
            line-height: 1.6;
            font-size: 16px;
        }

        /* Footer */
        footer {
            background-color: var(--theme-color);
            padding: 10px 20px;
            position: sticky;
            bottom: 0;
            z-index: 1000;
        }

        .footer-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .footer-button {
            display: flex;
            align-items: center;
            padding: 8px 16px;
            background-color: var(--button-bg-color);
            color: var(--button-text-color);
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: var(--button-transition);
        }

        .footer-button:hover {
            transform: scale(var(--button-hover-scale));
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        /* Responsive Design */
        @media (max-width: 600px) {
            .nav-button {
                font-size: 12px;
                padding: 6px 12px;
            }

            .footer-button {
                font-size: 12px;
                padding: 6px 12px;
            }

            .section-title {
                font-size: 20px;
            }

            .content-block {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header>
            <a href="https://futurofortissimo.github.io/">
                <img src="/index_files/ff.png" alt="Logo" class="logo">
            </a>
            <nav id="buttons-container">
                <!-- Navigation buttons will be inserted here -->
            </nav>
            <button class="nav-button" id="language-switch">English</button>
        </header>

        <!-- Progress Bar -->
        <div class="progress-bar" id="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>

        <!-- Main Content -->
        <main>
            <div class="cards-wrapper" id="cards-wrapper">
                <!-- Cards will be inserted here -->
            </div>
        </main>

        <!-- Footer -->
        <footer>
            <div class="footer-content">
                <a href="https://futurofortissimo.github.io/" class="footer-button">
                    <img src="/index_files/ff.png" alt="Logo" class="logo" style="height: 24px;">
                </a>
                <a href="#" class="footer-button" id="share-button">Condividi</a>
                <a href="https://www.paypal.com/paypalme/michelemerelli" class="footer-button">Supporta</a>
                <button class="footer-button" id="footer-language-switch">English</button>
            </div>
        </footer>
    </div>

    <!-- JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            let currentLanguage = 'it';
            let currentIndex = 0;
            let publications = [];
            const buttonsContainer = document.getElementById('buttons-container');
            const cardsWrapper = document.getElementById('cards-wrapper');
            const progressBar = document.getElementById('progress-bar');
            const languageSwitch = document.getElementById('language-switch');
            const footerLanguageSwitch = document.getElementById('footer-language-switch');
            const shareButton = document.getElementById('share-button');

            // Event Listeners
            languageSwitch.addEventListener('click', switchLanguage);
            footerLanguageSwitch.addEventListener('click', switchLanguage);
            shareButton.addEventListener('click', shareContent);

            // Initialize App
            initializeApp();

            function initializeApp() {
                loadContent();
            }

            function loadContent() {
                const contentURL = currentLanguage === 'it' ? 'content_it.json' : 'content_en.json';
                fetch(contentURL)
                    .then(response => response.json())
                    .then(data => {
                        publications = data.publications;
                        renderNavigation();
                        renderCards();
                        updateProgressBar();
                    })
                    .catch(error => {
                        console.error('Error loading content:', error);
                    });
            }

            function renderNavigation() {
                buttonsContainer.innerHTML = '';
                publications.forEach((pub, index) => {
                    const button = document.createElement('button');
                    button.className = 'nav-button';
                    button.textContent = pub.buttonLabel;
                    button.addEventListener('click', () => {
                        scrollToCard(index);
                    });
                    buttonsContainer.appendChild(button);
                });
            }

            function renderCards() {
                cardsWrapper.innerHTML = '';
                publications.forEach(pub => {
                    const card = document.createElement('div');
                    card.className = 'card';

                    const cardContent = document.createElement('div');
                    cardContent.className = 'card-content';

                    // Substack Button
                    const substackButton = document.createElement('a');
                    substackButton.href = pub.substackLink;
                    substackButton.target = '_blank';
                    substackButton.className = 'footer-button';
                    substackButton.textContent = pub.title;
                    substackButton.style.marginBottom = '15px';
                    cardContent.appendChild(substackButton);

                    // Card Title
                    const title = document.createElement('h2');
                    title.className = 'section-title';
                    title.textContent = pub.title;
                    cardContent.appendChild(title);

                    // Content Blocks
                    pub.cards.forEach(contentBlock => {
                        const block = document.createElement('div');
                        block.className = 'content-block';
                        block.innerHTML = contentBlock.contentBlocks.map(item => `<p>${item.content}</p>`).join('');
                        cardContent.appendChild(block);
                    });

                    card.appendChild(cardContent);
                    cardsWrapper.appendChild(card);
                });
            }

            function scrollToCard(index) {
                currentIndex = index;
                const offset = index * -100;
                cardsWrapper.style.transform = `translateX(${offset}%)`;
                updateProgressBar();
            }

            function updateProgressBar() {
                const progress = ((currentIndex + 1) / publications.length) * 100;
                progressBar.style.width = `${progress}%`;
                progressBar.setAttribute('aria-valuenow', progress);
            }

            function switchLanguage() {
                currentLanguage = currentLanguage === 'it' ? 'en' : 'it';
                languageSwitch.textContent = currentLanguage === 'it' ? 'English' : 'Italiano';
                footerLanguageSwitch.textContent = currentLanguage === 'it' ? 'English' : 'Italiano';
                initializeApp();
            }

            function shareContent() {
                if (navigator.share) {
                    navigator.share({
                        title: 'futuro fortissimo',
                        url: 'https://futurofortissimo.github.io/'
                    }).catch(error => console.error('Error sharing:', error));
                } else {
                    // Fallback for browsers that do not support navigator.share
                    alert('La condivisione non è supportata dal tuo browser.');
                }
            }

            // Swipe functionality
            let startX = 0;
            let isDown = false;

            cardsWrapper.addEventListener('mousedown', (e) => {
                isDown = true;
                startX = e.pageX;
                cardsWrapper.style.transition = 'none';
            });

            cardsWrapper.addEventListener('mouseup', () => {
                isDown = false;
                cardsWrapper.style.transition = 'transform 0.5s ease-in-out';
            });

            cardsWrapper.addEventListener('mousemove', (e) => {
                if (!isDown) return;
                const deltaX = e.pageX - startX;
                const offset = deltaX / window.innerWidth * 100;
                const newOffset = currentIndex * -100 + offset;
                cardsWrapper.style.transform = `translateX(${newOffset}%)`;
            });

            cardsWrapper.addEventListener('mouseleave', () => {
                if (isDown) {
                    isDown = false;
                    cardsWrapper.style.transition = 'transform 0.5s ease-in-out';
                }
            });
        });
    </script>
</body>
</html>