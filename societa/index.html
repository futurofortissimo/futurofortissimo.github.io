<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Futuro Fortissimo - Riepilogo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Import Montserrat font from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    <!-- Favicon -->
    <link rel="icon" href="/index_files/ff.webp" type="image/webp">
    <link rel="apple-touch-icon" href="/index_files/ff.webp">
    <style>
        /* Root variables */
        :root {
            --theme-color: #ADD8E6; /* Light blue */
            --question-color: #B3E5FC; /* Lighter blue */
            --data-color: #81D4FA; /* Medium blue */
            --quote-color: #4FC3F7; /* Darker blue */
            --progress-bar-color: #4CAF50; /* Green */
        }

        /* Basic styles */
        body {
            margin: 0;
            font-family: 'Montserrat', sans-serif;
            background-color: #fff;
            color: #333;
            overflow: hidden; /* Prevent scrolling on body */
        }

        /* App container */
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* Header with logo, buttons, and language switch */
        .header {
            display: flex;
            align-items: center;
            background-color: var(--theme-color);
            padding: 10px;
            flex-shrink: 0;
            flex-wrap: nowrap;
        }

        .logo {
            height: 40px;
            cursor: pointer;
            flex-shrink: 0;
            margin-right: 10px;
        }

        .language-switch {
            background-color: transparent;
            border: none;
            font-size: 24px;
            cursor: pointer;
            flex-shrink: 0;
            margin-left: 10px;
        }

        /* Buttons container inside header */
        .buttons-container {
            display: flex;
            overflow-x: auto;
            flex-grow: 1;
        }

        .buttons-container::-webkit-scrollbar {
            display: none; /* Hide scrollbar */
        }

        /* Buttons */
        .button {
            flex: 0 0 auto;
            margin: 0 5px;
            padding: 8px 12px;
            background-color: #fff;
            color: #333;
            border-radius: 20px;
            text-align: center;
            font-size: 14px;
            cursor: pointer;
            user-select: none;
            white-space: nowrap;
        }

        /* Progress bar */
        .progress-bar {
            height: 5px;
            background-color: var(--progress-bar-color);
            width: 0%;
            transition: width 0.5s ease-in-out;
            flex-shrink: 0;
        }

        /* Cards container */
        .cards-container {
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        /* Cards wrapper for sliding effect */
        .cards-wrapper {
            display: flex;
            height: 100%;
            transition: transform 0.5s ease-in-out;
        }

        /* Individual card */
        .card {
            flex: 0 0 100%;
            height: 100%;
            overflow: hidden;
            background-color: #fff;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
        }

        /* Card content */
        .card-content {
            flex: 1;
            overflow-y: auto;
            padding: 10px 20px 30px 20px; /* Adjusted padding */
            box-sizing: border-box;
            max-width: 450px;
            margin: 0 auto;
        }

        /* Section styles */
        .section-title {
            margin-top: 10px;
            margin-bottom: 10px;
            font-size: 20px;
            font-weight: bold;
        }

        /* Content block */
        .content-block {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 10px;
            word-wrap: break-word; /* Prevent overflow of long words */
            font-size: 16px;
            font-weight: bold;
        }

        .paragraphs {
            background-color: #e0f7fa; /* Light cyan */
            font-weight: normal;
        }

        /* Hide scrollbars on card content */
        .card-content::-webkit-scrollbar {
            width: 0px;
            background: transparent;
        }

        /* Action button styles */
        .action-button {
            padding: 10px 20px;
            margin: 5px 0;
            background-color: var(--theme-color);
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
        }

        .action-button:hover {
            background-color: #7ec0ee; /* Slightly darker blue */
        }

        /* Footer */
        footer {
            text-align: center;
            font-size: 16px;
            font-family: 'Montserrat', sans-serif;
            padding: 10px;
            background-color: #f0f0f0;
        }

        footer a {
            color: #00bef8;
            text-decoration: none;
        }
        /* Content block for darker paragraphs */
      .darkerParagraphs {
          background-color: #b2ebf2; /* Slightly darker cyan */
          font-weight: normal;
          padding: 10px;
          border-radius: 10px;
          margin-bottom: 15px;
      }

      /* Subsection title */
      .subsection-title {
          margin-top: 20px;
          margin-bottom: 10px;
          font-size: 18px;
          font-weight: bold;
      }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header with logo, buttons, and language switch -->
        <div class="header">
            <a href="https://futurofortissimo.github.io/">
                <img src="/index_files/ff.png" alt="Logo" class="logo">
            </a>
            <!-- Buttons inside header -->
            <div class="buttons-container" id="buttons-container">
                <!-- Buttons will be dynamically inserted here -->
            </div>
            <button class="language-switch" id="language-switch">ðŸ‡¬ðŸ‡§</button>
        </div>

        <!-- Progress bar -->
        <div class="progress-bar"></div>

        <!-- Cards -->
        <div class="cards-container">
            <div class="cards-wrapper" id="cards-wrapper">
                <!-- Cards will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <footer>
        <p><a href="https://linktr.ee/micmer">michele merelli</a> per
        <a href="https://fortissimo.substack.com/">futuro fortissimo</a></p>
    </footer>

    <script>

        // Content data in Italian
        const content = {
     it: {
         publications: [
             {
                 buttonLabel: 'ðŸŽ¼ ff.1 Clima',
                 urlSlug: '-ff1-clima',
                 cards: [
                     {
                         title: 'ðŸƒ COP26, The Big Greta Is Watching You e le strategie per net-zero',
                         contentBlocks: [
                             {
                                 type: 'paragraphs',
                                 content: [
                                     'COP26, energie rinnovabili',
                                     'Bill Gates e il suo librozzo',
                                     'Quanto inquinano le criptovalute?'
                                 ]
                             },
                             {
                                 type: 'darkerParagraphs',
                                 content: [
                                     'ðŸŒŽ ff.1.1 Sensibilizzazione e arte\nIl progetto artistico di COP26 ha rivoluzionato l\'identitÃ  visiva della conferenza, evidenziando l\'importanza dell\'arte nel sensibilizzare sul cambiamento climatico.',
                                     'ðŸ“‰ ff.1.2 Da 51 miliardi a 0\nDa 51 miliardi a 0: la necessitÃ  urgente di ridurre a zero le emissioni globali di CO2-equivalenti, attualmente a 51 miliardi di tonnellate all\'anno, per combattere il cambiamento climatico.',
                                     'ðŸ›´ ff.1.3 Gli scooter elettrici ci salveranno?\nL\'80% degli spostamenti negli USA sono inferiori ai 16 km, suggerendo un potenziale di trasformazione della mobilitÃ  urbana tramite e-bikes e scooter elettrici.',
                                     'ðŸ­ ff.1.4 Catturare CO2 sarÃ  importante\nTecnologie di cattura CO2 potrebbero diventare economicamente accessibili a meno di 100$ per tonnellata, con l\'industria del cemento e dell\'acciaio come principali target.',
                                     'ðŸ‡«ðŸ‡® ff.1.5 Il consumo energetico di Bitcoin\nIl consumo energetico di Bitcoin equivale a quello dell\'intera Finlandia, ma l\'utilizzo di energia rinnovabile nel mining potrebbe mitigarne l\'impatto ambientale.',
                                     'âš¡ ff.1.6 Fusione Nucleare\nLa fusione nucleare, un tempo prevista per i primi anni \'90, ora mira al 2035 come traguardo per dimostrare un processo di fusione pulito.'
                                 ]
                             }
                         ]
                     }
                 ]
             },
             {
                 buttonLabel: 'ðŸŽ¼ ff.5 Elettrizzante',
                 urlSlug: '-ff5-elettrizzante',
                 cards: [
                     {
                         title: 'ðŸ”Œ Tesla, Van Moof, Duracell? Chi vincerÃ  la sfida della mobilitÃ  sostenibile?',
                         contentBlocks: [
                             {
                                 type: 'paragraphs',
                                 content: [
                                     'VanMoof: la Tesla olandese per le e-bike',
                                     'Quanto inquina una Tesla rispetto alla Panda?',
                                     'Noi come quelli a cavallo: il muro di Marchetti'
                                 ]
                             },
                             {
                                 type: 'darkerParagraphs',
                                 content: [
                                     'â“ ff.5.1 Non tutto verde quello che luccica\nUtilitaria a benzina meno inquinante di Tesla? Una promettente start-up olandese, Lightyear One, riporta come non sia tuttâ€™oro, o verde, quello che luccica.',
                                     'ðŸ”‹ ff.5.2 Duracell? No, Tesla\nNon solo auto: con 3 GWh di capacitÃ , Tesla controlla una buona porzione del potenziale di immagazzinamento di energia elettrica nel mondo. E punta a raggiungere i 1.500 GWh entro il 2030.',
                                     'ðŸš² ff.5.3 Pedalata assistita\nDurante la pandemia, le bici elettriche hanno venduto piÃ¹ delle auto elettriche (500k bici vs 250k auto negli Stati Uniti).',
                                     'ðŸ˜Ž ff.5.4 La Tesla delle biciclette\nSe le bici elettriche sono la prossima frontiera della mobilitÃ , Van Moof Ã¨ la Tesla delle due ruote.',
                                     'ðŸ§± ff.5.5 Il muro di Marchetti\nUnâ€™ora costante universale: il limite di tempo di viaggio che influisce sulle scelte di vita e lavoro.',
                                     'âš°ï¸ ff.5.6 La pericolositÃ  del traffico, nel mondo\nE mentre siete nel traffico, occhio alla strada. In Europa guidiamo benissimo (tranne per quelli col cappello).'
                                 ]
                             }
                         ]
                     }
                 ]
             },
             {
                 buttonLabel: 'ðŸŽ¼ ff.20 Greta in bici?',
                 urlSlug: '-ff20-greta-in-bici',
                 cards: [
                     {
                         title: 'ðŸš² Da "Isola dei cani" di Wes Anderson a Van Moof, la nuova rivoluzione verde dell\'e-bike',
                         contentBlocks: [
                             {
                                 type: 'paragraphs',
                                 content: [
                                     'Cosa c\'entra Wes Anderson con i ladri di bicicletta?',
                                     'Milano o Parigi? Chi sarÃ  la regina delle piste ciclabili?',
                                     'Da quando a San Francisco si scia?'
                                 ]
                             },
                             {
                                 type: 'darkerParagraphs',
                                 content: [
                                     'ðŸš² ff.20.1 La rivincita delle biciclette\nLa pandemia ha aumentato l\'uso della bicicletta, con un incremento notevole nelle Filippine e progressi anche in Italia con l\'aumento delle piste ciclabili.',
                                     'ðŸ‡®ðŸ‡© ff.20.2 L\'esempio di Jakarta\nA Jakarta, l\'utilizzo della bicicletta Ã¨ aumentato di 6 volte, evidenziando un cambiamento significativo verso la mobilitÃ  sostenibile.',
                                     'â›·ï¸ ff.20.3 San Francisco come Cortina\nSan Francisco presenta mappe della pericolositÃ  delle strade come piste da sci: la pista nera sarebbe Viale Palmanova, insomma.',
                                     'ðŸš¨ ff.20.4 Simmetrie di Wes Anderson contro i furti\nVan Moof, azienda olandese di e-bike, sfrutta le simmetrie di Wes Anderson per promuovere la sicurezza delle sue biciclette.'
                                 ]
                             }
                         ]
                     }
                 ]
             },
             {
                 buttonLabel: 'ðŸŽ¼ ff.33 Le piante ci salveranno?',
                 urlSlug: '-ff33-le-piante-ci-salveranno',
                 cards: [
                     {
                         title: 'Inno alle piante, tra algoritmi, cattura di CO2 e problemi da risolvere',
                         contentBlocks: [
                             {
                                 type: 'paragraphs',
                                 content: [
                                     'Piante: da fotosintesi a fonte di conoscenza',
                                     'Foglie in silicone per efficienze maggiori',
                                     'Come modificare la genetica per catturare piÃ¹ CO2'
                                 ]
                             },
                             {
                                 type: 'darkerParagraphs',
                                 content: [
                                     'ðŸ§  ff.33.1 La valenza filosofica e conoscitiva degli alberi\nEsplorando la connessione storica e culturale tra umanitÃ  e piante, evidenziata dall\'ispirazione degli algoritmi di ricerca come il decision tree.',
                                     'ðŸ ff.33.2 Raccoglitori di CO2\nStudio su come le piante catturano e immagazzinano CO2, con focus su efficienze di storage in foreste e torbiere, mostrando l\'importanza della biodiversitÃ  e delle tecnologie innovative per la semina.',
                                     'ðŸ­ ff.33.3 Piante modificate per catturare CO2\nTecniche genetiche avanzate come CRISPR vengono utilizzate per aumentare la capacitÃ  delle piante di convertire CO2 in carbonio stabilizzato, un approccio supportato da importanti investimenti nel campo della genetica vegetale.',
                                     'ðŸ§® ff.33.4 Muffe computazionali\nIl Plasmodium, una muffa sfruttata per risolvere problemi di ottimizzazione combinatoria come il Traveling Salesman Problem, dimostrando la potenzialitÃ  di sistemi biologici nel calcolo e nella progettazione di reti efficienti e resilienti.'
                                 ]
                             }
                         ]
                     }
                 ]
             },
             {
                 buttonLabel: 'ðŸŽ¼ ff.51 La religione del 21esimo secolo?',
                 urlSlug: '-ff51-la-religione-del-21esimo-secolo',
                 cards: [
                     {
                         title: 'Il sottile equilibrio tra Greta, Greenpeace e speranza nel futuro',
                         contentBlocks: [
                             {
                                 type: 'paragraphs',
                                 content: [
                                     'La Natura Ã¨ stata idealizzata?',
                                     'Lâ€™ecologia Ã¨ la religione del 21esimo secolo?',
                                     'Investiamo troppo per i cambiamenti climatici?'
                                 ]
                             },
                             {
                                 type: 'darkerParagraphs',
                                 content: [
                                     'ðŸ’š ff.51.1 Lâ€™affabulazione per il verde\nRiflessioni su come la natura, simbolo di speranza e pace interiore, diventi oggetto di un\'affabulazione romantica, che a volte rischia di distorcere la realtÃ  pragmatica della sua esistenza e utilitÃ .',
                                     'ðŸ› ff.51.2 Ecologia = religione?\nAnalisi critica sulle possibili somiglianze tra l\'approccio moderno all\'ecologia e le pratiche religiose, interrogandosi sull\'esistenza di una fede verde basata piÃ¹ su convinzioni emotive che su azioni razionali e scientifiche.',
                                     'ðŸ”¥ ff.51.3 Sono il tuo sogno eretico\nI cambiamenti climatici sono esagerati dai media? Uno spunto per considerare un approccio piÃ¹ equilibrato che includa soluzioni innovative e adattive, anche valutando il ritorno sull\'investimento delle politiche climatiche rispetto alla salute pubblica, l\'istruzione e la riduzione della povertÃ .'
                                 ]
                             }
                         ]
                     }
                 ]
             },
             {
                 buttonLabel: 'ðŸŽ¼ ff.61 La decrescita felice Ã¨ impossibile?',
                 urlSlug: '-ff61-la-decrescita-felice-e-impossibile',
                 cards: [
                     {
                         title: 'I costi di ogni attivitÃ  per un budget da 10 tonnellate di CO2 annue',
                         contentBlocks: [
                             {
                                 type: 'paragraphs',
                                 content: [
                                     'Stare nel budget di 10 tonnellate CO2 allâ€™anno',
                                     'Hamburger che inquinano meno degli asparagi',
                                     'Un abbonamento, stile Spotify, per vivere il mondo'
                                 ]
                             },
                             {
                                 type: 'darkerParagraphs',
                                 content: [
                                     'âš–ï¸ ff.61.1 Misurare lâ€™inquinamento in ore di vita\nConvertire le emissioni di CO2 in tempo di vita percepibile rende tangibile l\'impatto ambientale delle nostre scelte quotidiane.',
                                     'ðŸ•— ff.61.2 Emissioni convertite in tempo\nAnalizzando le emissioni attraverso l\'equivalenza tempo-CO2, individuiamo attivitÃ  quotidiane e il loro impatto in ore di vita perse.',
                                     'ðŸ¥© ff.61.3 Carne o asparagi?\nLa scelta alimentare influisce significativamente sulle emissioni di CO2, con sorprendenti confronti tra diete vegetariane e consumo di carne.',
                                     'ðŸŽ¶ ff.61.4 Un abbonamento stile Spotify per il mondo\nConsiderare l\'inquinamento come un servizio in abbonamento puÃ² essere un passo verso la compensazione delle proprie emissioni CO2.'
                                 ]
                             }
                         ]
                     }
                 ]
             }
         ]
     },
     en: {
         publications: [
             {
                 buttonLabel: 'ðŸŽ¼ ff.1 Climate',
                 urlSlug: '-ff1-climate',
                 cards: [
                     {
                         title: 'ðŸƒ COP26, The Big Greta Is Watching You and strategies for net-zero',
                         contentBlocks: [
                             {
                                 type: 'paragraphs',
                                 content: [
                                     'COP26, renewable energies',
                                     'Bill Gates and his big book',
                                     'How much do cryptocurrencies pollute?'
                                 ]
                             },
                             {
                                 type: 'darkerParagraphs',
                                 content: [
                                     'ðŸŒŽ ff.1.1 Awareness and Art\nThe artistic project of COP26 revolutionized the visual identity of the conference, highlighting the importance of art in raising awareness about climate change.',
                                     'ðŸ“‰ ff.1.2 From 51 billion to 0\nFrom 51 billion to 0: the urgent need to reduce global CO2-equivalent emissions, currently at 51 billion tons per year, to combat climate change.',
                                     'ðŸ›´ ff.1.3 Will electric scooters save us?\n80% of trips in the USA are under 16 km, suggesting potential for transforming urban mobility through e-bikes and electric scooters.',
                                     'ðŸ­ ff.1.4 Capturing CO2 will be important\nCO2 capture technologies could become economically accessible at less than $100 per ton, with the cement and steel industries as main targets.',
                                     'ðŸ‡«ðŸ‡® ff.1.5 The energy consumption of Bitcoin\nBitcoin\'s energy consumption is equivalent to that of Finland, but using renewable energy in mining could mitigate its environmental impact.',
                                     'âš¡ ff.1.6 Nuclear Fusion\nNuclear fusion, once expected by the early 90s, now aims for 2035 as a milestone to demonstrate a clean fusion process.'
                                 ]
                             }
                         ]
                     }
                 ]
             },
             {
                 buttonLabel: 'ðŸŽ¼ ff.5 Electrifying',
                 urlSlug: '-ff5-electrifying',
                 cards: [
                     {
                         title: 'ðŸ”Œ Tesla, Van Moof, Duracell? Who will win the sustainable mobility challenge?',
                         contentBlocks: [
                             {
                                 type: 'paragraphs',
                                 content: [
                                     'VanMoof: the Dutch Tesla for e-bikes',
                                     'How much does a Tesla pollute compared to a Panda?',
                                     'We are like those on horseback: Marchetti\'s wall'
                                 ]
                             },
                             {
                                 type: 'darkerParagraphs',
                                 content: [
                                     'â“ ff.5.1 Not all that glitters is green\nGasoline small cars less polluting than Tesla? A promising Dutch start-up, Lightyear One, reports that not everything that glitters, or is green, is gold.',
                                     'ðŸ”‹ ff.5.2 Duracell? No, Tesla\nNot just cars: with 3 GWh of capacity, Tesla controls a good portion of the world\'s electrical energy storage potential and aims to reach 1,500 GWh by 2030.',
                                     'ðŸš² ff.5.3 Assisted pedaling\nDuring the pandemic, electric bikes outsold electric cars (500k bikes vs 250k cars in the United States).',
                                     'ðŸ˜Ž ff.5.4 The Tesla of bicycles\nIf electric bikes are the next frontier of mobility, Van Moof is the Tesla of two wheels.',
                                     'ðŸ§± ff.5.5 Marchetti\'s wall\nA universal constant one-hour travel time: the limit that influences life and work choices.',
                                     'âš°ï¸ ff.5.6 The danger of traffic worldwide\nAnd while you\'re in traffic, watch the road. In Europe, we drive very well (except for those with hats).'
                                 ]
                             }
                         ]
                     }
                 ]
             },
             {
                 buttonLabel: 'ðŸŽ¼ ff.20 Greta on a bike?',
                 urlSlug: '-ff20-greta-on-a-bike',
                 cards: [
                     {
                         title: 'ðŸš² From Wes Anderson\'s "Isle of Dogs" to Van Moof, the new green revolution of e-bikes',
                         contentBlocks: [
                             {
                                 type: 'paragraphs',
                                 content: [
                                     'What does Wes Anderson have to do with bicycle thieves?',
                                     'Milan or Paris? Who will be the queen of bike lanes?',
                                     'Since when do we ski in San Francisco?'
                                 ]
                             },
                             {
                                 type: 'darkerParagraphs',
                                 content: [
                                     'ðŸš² ff.20.1 The revenge of bicycles\nThe pandemic has increased bicycle use, with a notable rise in the Philippines and progress in Italy with more bike lanes.',
                                     'ðŸ‡®ðŸ‡© ff.20.2 The example of Jakarta\nIn Jakarta, bicycle use increased sixfold, highlighting a significant shift towards sustainable mobility.',
                                     'â›·ï¸ ff.20.3 San Francisco like Cortina\nSan Francisco presents danger maps of streets like ski slopes: the black run would be akin to Viale Palmanova.',
                                     'ðŸš¨ ff.20.4 Wes Anderson\'s symmetries against theft\nVan Moof, a Dutch e-bike company, leverages Wes Anderson\'s symmetries to promote the security of its bicycles.'
                                 ]
                             }
                         ]
                     }
                 ]
             },
             {
                 buttonLabel: 'ðŸŽ¼ ff.33 Will plants save us?',
                 urlSlug: '-ff33-will-plants-save-us',
                 cards: [
                     {
                         title: 'An ode to plants, among algorithms, CO2 capture, and problems to solve',
                         contentBlocks: [
                             {
                                 type: 'paragraphs',
                                 content: [
                                     'Plants: from photosynthesis to a source of knowledge',
                                     'Silicone leaves for greater efficiencies',
                                     'How to modify genetics to capture more CO2'
                                 ]
                             },
                             {
                                 type: 'darkerParagraphs',
                                 content: [
                                     'ðŸ§  ff.33.1 The philosophical and cognitive value of trees\nExploring the historical and cultural connection between humanity and plants, highlighted by the inspiration of search algorithms like the decision tree.',
                                     'ðŸ ff.33.2 CO2 collectors\nStudy on how plants capture and store CO2, focusing on storage efficiencies in forests and peatlands, showing the importance of biodiversity and innovative seeding technologies.',
                                     'ðŸ­ ff.33.3 Plants modified to capture CO2\nAdvanced genetic techniques like CRISPR are used to increase plants\' ability to convert CO2 into stabilized carbon, an approach supported by significant investments in plant genetics.',
                                     'ðŸ§® ff.33.4 Computational molds\nPlasmodium, a mold exploited to solve combinatorial optimization problems like the Traveling Salesman Problem, demonstrating the potential of biological systems in computing and designing efficient and resilient networks.'
                                 ]
                             }
                         ]
                     }
                 ]
             },
             {
                 buttonLabel: 'ðŸŽ¼ ff.51 The religion of the 21st century?',
                 urlSlug: '-ff51-the-religion-of-the-21st-century',
                 cards: [
                     {
                         title: 'The subtle balance between Greta, Greenpeace, and hope for the future',
                         contentBlocks: [
                             {
                                 type: 'paragraphs',
                                 content: [
                                     'Has Nature been idealized?',
                                     'Is ecology the religion of the 21st century?',
                                     'Are we investing too much in climate change?'
                                 ]
                             },
                             {
                                 type: 'darkerParagraphs',
                                 content: [
                                     'ðŸ’š ff.51.1 The storytelling for green\nReflections on how nature, a symbol of hope and inner peace, becomes the object of romantic storytelling, which sometimes risks distorting the pragmatic reality of its existence and utility.',
                                     'ðŸ› ff.51.2 Ecology = religion?\nCritical analysis of the possible similarities between the modern approach to ecology and religious practices, questioning the existence of a green faith based more on emotional convictions than rational and scientific actions.',
                                     'ðŸ”¥ ff.51.3 I am your heretical dream\nAre climate changes exaggerated by the media? A cue to consider a more balanced approach that includes innovative and adaptive solutions, also evaluating the return on investment of climate policies compared to public health, education, and poverty reduction.'
                                 ]
                             }
                         ]
                     }
                 ]
             },
             {
                 buttonLabel: 'ðŸŽ¼ ff.61 Is happy degrowth impossible?',
                 urlSlug: '-ff61-is-happy-degrowth-impossible',
                 cards: [
                     {
                         title: 'The costs of every activity for a budget of 10 tons of CO2 per year',
                         contentBlocks: [
                             {
                                 type: 'paragraphs',
                                 content: [
                                     'Staying within a budget of 10 tons of CO2 per year',
                                     'Hamburgers that pollute less than asparagus',
                                     'A Spotify-style subscription to experience the world'
                                 ]
                             },
                             {
                                 type: 'darkerParagraphs',
                                 content: [
                                     'âš–ï¸ ff.61.1 Measuring pollution in hours of life\nConverting CO2 emissions into perceivable life time makes the environmental impact of our daily choices tangible.',
                                     'ðŸ•— ff.61.2 Emissions converted into time\nAnalyzing emissions through the time-CO2 equivalence, we identify daily activities and their impact in hours of life lost.',
                                     'ðŸ¥© ff.61.3 Meat or asparagus?\nFood choices significantly affect CO2 emissions, with surprising comparisons between vegetarian diets and meat consumption.',
                                     'ðŸŽ¶ ff.61.4 A Spotify-style subscription for the world\nConsidering pollution as a subscription service can be a step towards offsetting one\'s CO2 emissions.'
                                 ]
                             }
                         ]
                     }
                 ]
             }
         ]
     }
 };


    let currentLanguage = 'it';
let currentIndex = 0;
let publicationIndices = [];

const buttonsContainer = document.getElementById('buttons-container');
const cardsWrapper = document.getElementById('cards-wrapper');
const progressBar = document.querySelector('.progress-bar');
const languageSwitch = document.getElementById('language-switch');

let cards = [];

function initializeApp() {
buttonsContainer.innerHTML = '';
cardsWrapper.innerHTML = '';
cards = [];
currentIndex = 0;

const { publications } = content[currentLanguage];

let cardIndex = 0;
publicationIndices = [];

publications.forEach((publication) => {
    createButton(publication.buttonLabel, cardIndex);
    publicationIndices.push(cardIndex);
    publication.cards.forEach(cardData => {
        createCard(cardData);
        cardIndex++;
    });
});

// Add a sentinel value for the end
publicationIndices.push(cardIndex);

showCard(0);
}

function createButton(label, index) {
const button = document.createElement('div');
button.className = 'button';
button.textContent = label;
button.addEventListener('click', () => {
    showCard(index);
});
buttonsContainer.appendChild(button);
}

function createCard(cardData) {
const card = document.createElement('div');
card.className = 'card';

const cardContent = document.createElement('div');
cardContent.className = 'card-content';

const title = document.createElement('h2');
title.className = 'section-title';
title.textContent = cardData.title;
cardContent.appendChild(title);

cardData.contentBlocks.forEach(block => {
    const contentBlock = createContentBlock(block.type, block.content);
    cardContent.appendChild(contentBlock);
});

card.appendChild(cardContent);

cardsWrapper.appendChild(card);
cards.push(card);
}

function createContentBlock(type, contents) {
    const div = document.createElement('div');
    div.className = `content-block ${type}`;

    contents.forEach(item => {
        // Split the item into title and content at the first newline
        const [title, ...rest] = item.split('\n');
        const contentText = rest.join('\n').trim();

        const p = document.createElement('p');

        // Create an anchor element for the title
        const link = document.createElement('a');
        link.href = generateLink(title);
        link.target = '_blank'; // Open link in new tab (optional)
        link.style.textDecoration = 'none'; // Optional: Remove underline

        // Create a bold element for the title
        const boldTitle = document.createElement('strong');
        boldTitle.textContent = title.trim();
        boldTitle.style.color = '#333'; // Optional: Match text color

        // Append the bold title to the link
        link.appendChild(boldTitle);

        // Append the link to the paragraph
        p.appendChild(link);

        if (contentText) {
            // Add a line break
            p.appendChild(document.createElement('br'));

            // Create a text node for the content
            const contentNode = document.createTextNode(contentText);
            p.appendChild(contentNode);
        }

        div.appendChild(p);
    });

    return div;
}
function generateLink(title) {
    const baseUrl = 'https://fortissimo.substack.com/p/';
    const publication = getCurrentPublication();
    const slug = publication && publication.urlSlug ? publication.urlSlug : '';

    // Extract the ff number and title from the content
    const ffMatch = title.match(/ff\.(\d+)\.(\d+)\s(.+)/);

    if (ffMatch) {
        const [, , , sectionTitle] = ffMatch;
        const sanitizedSectionTitle = sanitizeTitle(sectionTitle);
        const fragment = `ff-${sanitizedSectionTitle}`;
        return `${baseUrl}${slug}#${encodeURIComponent(fragment)}`;
    } else {
        // Fallback to the previous behavior if the title doesn't match the expected format
        const fragment = sanitizeTitle(title);
        return `${baseUrl}${slug}#${encodeURIComponent(fragment)}`;
    }
}

function sanitizeTitle(title) {
    // Remove emojis, numbers, and special characters, keep spaces
    let sanitized = title.replace(/[^\p{L}\s-]/gu, '');
    // Trim whitespace and convert to lowercase
    sanitized = sanitized.trim().toLowerCase();
    // Replace spaces with hyphens
    sanitized = sanitized.replace(/\s+/g, '-');
    return sanitized;
}
function getCurrentPublication() {
    const { publications } = content[currentLanguage];
    for (let i = 0; i < publicationIndices.length - 1; i++) {
        const startIndex = publicationIndices[i];
        const endIndex = publicationIndices[i + 1];
        if (currentIndex >= startIndex && currentIndex < endIndex) {
            return publications[i];
        }
    }
    // If no matching publication is found, return the first publication
    return publications[0];
}

        // Function to create the book details card
        function createBookCard(bookDetails) {
            const card = document.createElement('div');
            card.className = 'card';

            const cardContent = document.createElement('div');
            cardContent.className = 'card-content book-details';

            const buyText = currentLanguage === 'it' ? 'ðŸ“– Acquista il libro' : 'ðŸ“– Buy this book';
            const coffeeText = currentLanguage === 'it' ? 'â˜• Offrimi un caffÃ¨' : 'â˜• Buy me a coffee';
            const authorText = currentLanguage === 'it' ? 'Autore' : 'Author';
            const yearText = currentLanguage === 'it' ? 'Anno' : 'Year';
            const pagesText = currentLanguage === 'it' ? 'Pagine' : 'Pages';

            cardContent.innerHTML = `
                <img src="${bookDetails.image}" alt="Book Cover" style="width:100%; height:auto; border-radius: 10px;">
                <h2>${bookDetails.title}</h2>
                <p>${authorText}: ${bookDetails.author}</p>
                <p>${yearText}: ${bookDetails.year}</p>
                <p>${pagesText}: ${bookDetails.pages}</p>
                <button class="action-button" onclick="window.open('${bookDetails.link}', '_blank')">${buyText}</button>
                <button class="action-button" onclick="window.open('${bookDetails.offerCoffeeLink}', '_blank')">${coffeeText}</button>
            `;

            card.appendChild(cardContent);

            cardsWrapper.appendChild(card);
            cards.push(card);
        }

        // Function to display a specific card
        function showCard(index) {
            currentIndex = index;
            cardsWrapper.style.transform = `translateX(-${index * 100}%)`;
            const progress = ((index + 1) / cards.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        let startX = 0;
  let startY = 0;
  let isDown = false;
  let isSwiping = false;
  let swipeThreshold = 50; // Minimum distance to trigger a swipe
  let swipeTimeThreshold = 300; // Maximum time for a swipe (in milliseconds)
  let swipeStartTime;

  const cardsContainer = document.querySelector('.cards-container');
  const buttonsContainer = document.getElementById('buttons-container');

  function handleStart(clientX, clientY) {
      startX = clientX;
      startY = clientY;
      isDown = true;
      isSwiping = false;
      swipeStartTime = new Date().getTime();
      cardsWrapper.style.transition = 'none';
  }

  function handleMove(clientX, clientY) {
      if (!isDown) return;
      const x = clientX;
      const y = clientY;
      const deltaX = x - startX;
      const deltaY = y - startY;

      // Determine if the user is scrolling vertically
      if (!isSwiping && Math.abs(deltaY) > Math.abs(deltaX)) {
          isDown = false;
          return;
      }

      isSwiping = true;
      const percentage = (deltaX / window.innerWidth) * 100;
      const offset = -currentIndex * 100 + percentage;
      cardsWrapper.style.transform = `translateX(${offset}%)`;

      // Prevent default behavior to stop scrolling
      event.preventDefault();
  }

  function handleEnd(clientX) {
      if (!isDown) return;
      isDown = false;
      const endX = clientX;
      const deltaX = endX - startX;
      const swipeTime = new Date().getTime() - swipeStartTime;

      let nextIndex = currentIndex;

      if (Math.abs(deltaX) > swipeThreshold && swipeTime < swipeTimeThreshold) {
          if (deltaX < 0 && currentIndex < cards.length - 1) {
              nextIndex++;
          } else if (deltaX > 0 && currentIndex > 0) {
              nextIndex--;
          }
      }

      // Get the range of indices for the current publication
      let [startIndex, endIndex] = getPublicationRange(currentIndex);

      // Ensure nextIndex is within the publication range
      nextIndex = Math.max(startIndex, Math.min(nextIndex, endIndex - 1));

      currentIndex = nextIndex;

      cardsWrapper.style.transition = 'transform 0.3s ease-in-out';
      showCard(currentIndex);
  }

  // Touch events for mobile
  cardsContainer.addEventListener('touchstart', (evt) => handleStart(evt.touches[0].clientX, evt.touches[0].clientY), {passive: false});
  cardsContainer.addEventListener('touchmove', (evt) => handleMove(evt.touches[0].clientX, evt.touches[0].clientY), {passive: false});
  cardsContainer.addEventListener('touchend', (evt) => handleEnd(evt.changedTouches[0].clientX), {passive: false});

  // Mouse events for desktop
  cardsContainer.addEventListener('mousedown', (evt) => handleStart(evt.clientX, evt.clientY), {passive: false});
  cardsContainer.addEventListener('mousemove', (evt) => handleMove(evt.clientX, evt.clientY), {passive: false});
  cardsContainer.addEventListener('mouseup', (evt) => handleEnd(evt.clientX), {passive: false});
  cardsContainer.addEventListener('mouseleave', (evt) => handleEnd(evt.clientX), {passive: false});

  // Function to get the range of indices for the current publication
  function getPublicationRange(index) {
      for (let i = 0; i < publicationIndices.length - 1; i++) {
          if (index >= publicationIndices[i] && index < publicationIndices[i + 1]) {
              return [publicationIndices[i], publicationIndices[i + 1]];
          }
      }
      return [0, cards.length]; // Fallback to full range
  }

  // Add swipe functionality to buttons container
  buttonsContainer.addEventListener('touchstart', (evt) => handleStart(evt.touches[0].clientX, evt.touches[0].clientY), {passive: false});
  buttonsContainer.addEventListener('touchmove', (evt) => {
      handleMove(evt.touches[0].clientX, evt.touches[0].clientY);
      // Scroll buttons container
      buttonsContainer.scrollLeft -= evt.touches[0].clientX - startX;
  }, {passive: false});
  buttonsContainer.addEventListener('touchend', (evt) => handleEnd(evt.changedTouches[0].clientX), {passive: false});

        // Language switch functionality
        languageSwitch.addEventListener('click', () => {
            currentLanguage = currentLanguage === 'it' ? 'en' : 'it';
            languageSwitch.textContent = currentLanguage === 'it' ? 'ðŸ‡¬ðŸ‡§' : 'ðŸ‡®ðŸ‡¹';
            initializeApp();
        });

        // Initialize the app after the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            initializeApp();
        });
    </script>
</body>
</html>
