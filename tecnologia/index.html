<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Futuro Fortissimo — Tecnologia</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Esplora le ultime innovazioni tecnologiche per un futuro sostenibile. Scopri come la tecnologia sta plasmando un mondo più verde e connesso.">
    <meta name="keywords" content="michele merelli futuro fortissimo tecnologia sostenibile, intelligenza artificiale, AI, robotica, guida autonoma, quantum computing, DALL-E, creatività digitale, sostenibilità, tecnologia verde, innovazione, futuro">
    <meta name="author" content="futuro fortissimo michele merelli micmer">
    <link rel="canonical" href="https://futurofortissimo.github.io/tecnologia/">
    <link rel="icon" href="/index_files/ff.webp" type="image/webp">
    <link rel="apple-touch-icon" href="/index_files/ff.webp">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=IBM+Plex+Mono:wght@600;700&family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root { --ff-blue:#4a90e2; --ff-red:#d0021b; --ff-yellow:#f5a623; --ff-green:#2ecc71; --ff-black:#0a0a0a; --ff-grid:rgba(0,0,0,0.03); }
        body { font-family:'Inter',sans-serif; background-color:#fdfdfd; color:var(--ff-black); min-height:100vh; line-height:1.6; position:relative; }
        body::before { content:''; position:fixed; inset:0; background-image:linear-gradient(var(--ff-grid) 1px,transparent 1px),linear-gradient(90deg,var(--ff-grid) 1px,transparent 1px); background-size:32px 32px; pointer-events:none; z-index:-1; }
        h1,h2,h3,h4,h5,h6 { font-family:'IBM Plex Mono',monospace; letter-spacing:0.03em; text-transform:uppercase; }
        .brutal-card { border:4px solid var(--ff-black); background:#fff; box-shadow:6px 6px 0 var(--ff-black); padding:24px; }
        .accent-bar { position:relative; }
        .accent-bar::before { content:''; position:absolute; top:-4px; left:-4px; right:-4px; height:10px; background:var(--ff-blue); }
        .accent-red::before { background:var(--ff-red); }
        .accent-yellow::before { background:var(--ff-yellow); }
        .accent-green::before { background:var(--ff-green); }
        .ff-eyebrow { font-family:'IBM Plex Mono',monospace; font-size:0.75rem; letter-spacing:0.24em; text-transform:uppercase; font-weight:700; }
        .ff-body { font-size:1rem; line-height:1.65; }
        .ff-body-sm { font-size:0.9375rem; line-height:1.6; }
        .no-round,.no-round * { border-radius:0!important; }
        a:focus-visible { outline:3px solid var(--ff-black); outline-offset:2px; }
        .no-scrollbar::-webkit-scrollbar { display:none; }
        .no-scrollbar { -ms-overflow-style:none; scrollbar-width:none; }

        /* Slider layout */
        .app-container { display:flex; flex-direction:column; height:100vh; overflow:hidden; }
        .cards-container { flex:1; overflow:hidden; position:relative; }
        .cards-wrapper { display:flex; height:100%; transition:transform 0.5s ease-in-out; width:100%; }
        .card { flex:0 0 100%; height:100%; overflow:hidden; display:flex; flex-direction:column; box-sizing:border-box; }
        .card-content { flex:1; overflow-y:auto; padding:24px; box-sizing:border-box; max-width:540px; margin:0 auto; cursor:pointer; }
        .card-content::-webkit-scrollbar { width:0; background:transparent; }

        /* Progress bar */
        .progress-bar { height:5px; background:var(--ff-blue); width:0%; transition:width 0.5s ease-in-out; flex-shrink:0; }

        /* Button pills in header scroll area */
        .pub-pill {
            flex:0 0 auto;
            padding:6px 14px;
            border:3px solid var(--ff-black);
            background:#fff;
            font-family:'IBM Plex Mono',monospace;
            font-size:0.75rem;
            font-weight:700;
            letter-spacing:0.06em;
            text-transform:uppercase;
            cursor:pointer;
            white-space:nowrap;
            transition:background 0.12s, transform 0.12s;
            user-select:none;
        }
        .pub-pill:hover { background:var(--ff-yellow); transform:translateY(-1px); }
        .pub-pill.active { background:var(--ff-blue); color:#fff; }

        /* Substack link button inside card */
        .substack-btn {
            display:inline-block;
            padding:8px 16px;
            border:3px solid var(--ff-black);
            background:var(--ff-yellow);
            font-family:'IBM Plex Mono',monospace;
            font-size:0.8rem;
            font-weight:700;
            text-transform:uppercase;
            letter-spacing:0.08em;
            cursor:pointer;
            margin-bottom:16px;
            box-shadow:3px 3px 0 var(--ff-black);
            transition:transform 0.1s;
        }
        .substack-btn:hover { transform:translate(-1px,-1px); box-shadow:4px 4px 0 var(--ff-black); }

        /* Content block styles */
        .content-block { padding:12px 16px; margin-bottom:12px; border-left:4px solid var(--ff-blue); }
        .content-block.paragraphs { border-left-color:var(--ff-green); background:rgba(46,204,113,0.04); }
        .content-block.darkerParagraphs { border-left-color:var(--ff-blue); background:rgba(74,144,226,0.04); }
        .content-block p { margin-bottom:10px; }
        .content-block p:last-child { margin-bottom:0; }

        /* Footer buttons */
        .ff-footer-btn {
            padding:8px 16px;
            border:3px solid var(--ff-black);
            background:#fff;
            font-family:'IBM Plex Mono',monospace;
            font-size:0.7rem;
            font-weight:700;
            letter-spacing:0.12em;
            text-transform:uppercase;
            cursor:pointer;
            text-decoration:none;
            color:var(--ff-black);
            transition:background 0.12s;
        }
        .ff-footer-btn:hover { background:var(--ff-yellow); }
    </style>
</head>
<body class="no-round">
<div class="app-container">
    <!-- Header -->
    <header class="bg-white" style="border-bottom:4px solid var(--ff-black)">
        <div class="max-w-5xl mx-auto px-6 py-4 flex items-center justify-between gap-4">
            <div class="flex-shrink-0">
                <div class="ff-eyebrow text-gray-500">Futuro Fortissimo — Tecnologia</div>
                <h1 class="text-xl font-bold tracking-tight mt-1" style="font-size:clamp(1.2rem,1rem+0.8vw,1.6rem)">TECNOLOGIA</h1>
            </div>
            <nav class="flex gap-4 flex-shrink-0">
                <a class="ff-eyebrow text-gray-600 hover:text-black hover:underline" href="/index.html">Home</a>
                <a class="ff-eyebrow text-gray-600 hover:text-black hover:underline" href="/book/">Libro</a>
                <a class="ff-eyebrow text-gray-600 hover:text-black hover:underline" href="/themes.html">Temi</a>
                <a class="ff-eyebrow text-gray-600 hover:text-black hover:underline" href="/note.html">Note</a>
            </nav>
        </div>
    </header>

    <!-- Publication buttons bar -->
    <div class="bg-white" style="border-bottom:3px solid var(--ff-black)">
        <div class="flex gap-3 px-6 py-3 overflow-x-auto no-scrollbar" id="buttons-container"></div>
    </div>

    <!-- Progress bar -->
    <div class="progress-bar" id="progress-bar"></div>

    <!-- Cards -->
    <div class="cards-container" id="cards-container">
        <div class="cards-wrapper" id="cards-wrapper"></div>
    </div>

    <!-- Footer -->
    <footer class="bg-white flex-shrink-0" style="border-top:4px solid var(--ff-black)">
        <div class="flex items-center justify-center gap-4 px-6 py-3">
            <a href="https://futurofortissimo.github.io/" class="ff-footer-btn">Home</a>
            <button class="ff-footer-btn" id="share-btn">Share</button>
            <button class="ff-footer-btn" id="lang-btn">English</button>
        </div>
    </footer>
</div>

<script>
let currentLanguage = 'it';
let currentIndex = 0;
let publicationIndices = [];
let cards = [];

const buttonsContainer = document.getElementById('buttons-container');
const cardsWrapper = document.getElementById('cards-wrapper');
const progressBar = document.getElementById('progress-bar');
const langBtn = document.getElementById('lang-btn');
const shareBtn = document.getElementById('share-btn');
const cardsContainer = document.getElementById('cards-container');

function getTranslatedSubstackLink(originalLink) {
    if (currentLanguage === 'it') return originalLink;
    try {
        const url = new URL(originalLink);
        if (!url.hostname.includes('substack.com')) return originalLink;
        const translatedDomain = url.hostname.replace(/\./g, '-') + '.translate.goog';
        return `https://${translatedDomain}${url.pathname}?_x_tr_sl=auto&_x_tr_tl=en&_x_tr_hl=it&_x_tr_hist=true`;
    } catch (e) { return originalLink; }
}

async function initializeApp() {
    buttonsContainer.innerHTML = '';
    cardsWrapper.innerHTML = '';
    cards = [];
    currentIndex = 0;

    const contentURL = currentLanguage === 'it' ? 'content_it.json' : 'content_en.json';
    langBtn.textContent = currentLanguage === 'it' ? 'English' : 'Italiano';

    try {
        const response = await fetch(contentURL);
        if (!response.ok) throw new Error('Network response was not ok');
        const content = await response.json();
        let { publications } = content;

        publications.sort((a, b) => {
            const numA = parseInt(a.buttonLabel.match(/ff\.(\d+)/)[1], 10);
            const numB = parseInt(b.buttonLabel.match(/ff\.(\d+)/)[1], 10);
            return numA - numB;
        });

        let cardIndex = 0;
        publicationIndices = [];

        publications.forEach(pub => {
            createButton(pub.buttonLabel, cardIndex);
            publicationIndices.push(cardIndex);
            pub.cards.sort((a, b) => {
                const numA = parseInt(a.title.match(/ff\.(\d+)/)[1], 10);
                const numB = parseInt(b.title.match(/ff\.(\d+)/)[1], 10);
                return numA - numB;
            });
            pub.cards.forEach(cardData => {
                createCard(pub, cardData);
                cardIndex++;
            });
        });
        publicationIndices.push(cardIndex);
        showCard(0);
    } catch (error) {
        console.error('Error fetching content:', error);
        cardsWrapper.innerHTML = '<div class="flex items-center justify-center h-full"><p class="ff-body text-gray-500">Errore nel caricamento del contenuto.</p></div>';
    }
}

function createButton(label, index) {
    const button = document.createElement('div');
    button.className = 'pub-pill';
    button.textContent = label;
    button.addEventListener('click', () => showCard(index));
    buttonsContainer.appendChild(button);
}

function createCard(publication, cardData) {
    const card = document.createElement('div');
    card.className = 'card';

    const cardContent = document.createElement('div');
    cardContent.className = 'card-content';

    // Substack link button
    const substackBtn = document.createElement('div');
    substackBtn.className = 'substack-btn';
    substackBtn.textContent = publication.title;
    substackBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        window.open(getTranslatedSubstackLink(publication.substackLink), '_blank');
    });
    cardContent.appendChild(substackBtn);

    // Title
    const title = document.createElement('h2');
    title.className = 'text-lg font-bold mb-4';
    title.style.fontFamily = "'IBM Plex Mono', monospace";
    title.style.letterSpacing = '0.03em';
    title.textContent = cardData.title;
    cardContent.appendChild(title);

    // Content blocks
    cardData.contentBlocks.forEach(block => {
        const div = document.createElement('div');
        div.className = `content-block ${block.type}`;
        block.content.forEach(item => {
            const [titleText, ...rest] = item.split('\n');
            const contentText = rest.join('\n').trim();
            const p = document.createElement('p');
            p.className = 'ff-body-sm';
            const bold = document.createElement('strong');
            bold.textContent = titleText.trim();
            p.appendChild(bold);
            if (contentText) {
                p.appendChild(document.createElement('br'));
                const span = document.createElement('span');
                span.textContent = contentText;
                span.style.fontWeight = 'normal';
                p.appendChild(span);
            }
            div.appendChild(p);
        });
        cardContent.appendChild(div);
    });

    card.appendChild(cardContent);
    cardsWrapper.appendChild(card);
    cards.push(card);

    cardContent.addEventListener('click', () => {
        window.open(getTranslatedSubstackLink(publication.substackLink), '_blank');
    });
}

function showCard(index) {
    currentIndex = index;
    cardsWrapper.style.transform = `translateX(-${index * 100}%)`;
    const progress = cards.length > 0 ? ((index + 1) / cards.length) * 100 : 0;
    progressBar.style.width = `${progress}%`;
    // Highlight active button
    const buttons = buttonsContainer.children;
    for (let i = 0; i < buttons.length; i++) {
        buttons[i].classList.remove('active');
    }
    // Find which publication this card belongs to
    for (let i = 0; i < publicationIndices.length - 1; i++) {
        if (index >= publicationIndices[i] && index < publicationIndices[i + 1]) {
            if (buttons[i]) {
                buttons[i].classList.add('active');
                buttons[i].scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
            }
            break;
        }
    }
}

// Swipe functionality
let startX = 0, startY = 0, isDown = false, isScrolling = false;

cardsContainer.addEventListener('touchstart', e => {
    startX = e.touches[0].clientX;
    startY = e.touches[0].clientY;
    isDown = true; isScrolling = false;
    cardsWrapper.style.transition = 'none';
}, false);

cardsContainer.addEventListener('touchmove', e => {
    if (!isDown) return;
    const deltaX = e.touches[0].clientX - startX;
    const deltaY = e.touches[0].clientY - startY;
    if (!isScrolling) isScrolling = Math.abs(deltaY) > Math.abs(deltaX);
    if (!isScrolling) {
        e.preventDefault();
        cardsWrapper.style.transform = `translateX(${-currentIndex * 100 + (deltaX / window.innerWidth) * 100}%)`;
    }
}, false);

cardsContainer.addEventListener('touchend', e => {
    if (!isDown) return;
    isDown = false;
    if (!isScrolling) {
        const deltaX = e.changedTouches[0].clientX - startX;
        if (deltaX < -50 && currentIndex < cards.length - 1) currentIndex++;
        else if (deltaX > 50 && currentIndex > 0) currentIndex--;
        cardsWrapper.style.transition = 'transform 0.5s ease-in-out';
        showCard(currentIndex);
    }
}, false);

cardsContainer.addEventListener('mousedown', e => { startX = e.clientX; isDown = true; cardsWrapper.style.transition = 'none'; }, false);
cardsContainer.addEventListener('mousemove', e => {
    if (!isDown) return;
    const deltaX = e.clientX - startX;
    cardsWrapper.style.transform = `translateX(${-currentIndex * 100 + (deltaX / window.innerWidth) * 100}%)`;
}, false);
function handleMouseUp(e) {
    if (!isDown) return;
    isDown = false;
    const deltaX = e.clientX - startX;
    if (deltaX < -50 && currentIndex < cards.length - 1) currentIndex++;
    else if (deltaX > 50 && currentIndex > 0) currentIndex--;
    cardsWrapper.style.transition = 'transform 0.5s ease-in-out';
    showCard(currentIndex);
}
cardsContainer.addEventListener('mouseup', handleMouseUp, false);
cardsContainer.addEventListener('mouseleave', handleMouseUp, false);

langBtn.addEventListener('click', () => {
    currentLanguage = currentLanguage === 'it' ? 'en' : 'it';
    initializeApp();
});

shareBtn.addEventListener('click', () => {
    const url = window.location.href;
    if (navigator.share) {
        navigator.share({ title: document.title, url }).catch(() => {});
    } else {
        navigator.clipboard.writeText(url).then(() => alert('URL copiato!')).catch(() => {});
    }
});

document.addEventListener('DOMContentLoaded', () => initializeApp());
</script>
</body>
</html>
