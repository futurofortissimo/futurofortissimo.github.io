<!doctype html>
<html lang="it" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Futuro Fortissimo — Indice macro-temi</title>
  <meta name="description" content="Indice macro-temi di Futuro Fortissimo: mappa dei temi ricorrenti, esempi e percorsi di lettura." />
  <link rel="canonical" href="https://futurofortissimo.github.io/themes.html" />

  <meta property="og:title" content="Futuro Fortissimo — Indice macro-temi" />
  <meta property="og:description" content="Mappa dei macro-temi ricorrenti nel corpus Futuro Fortissimo." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://futurofortissimo.github.io/themes.html" />
  <meta property="og:image" content="https://futurofortissimo.github.io/logo.png" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Futuro Fortissimo — Indice macro-temi" />
  <meta name="twitter:description" content="Mappa dei macro-temi ricorrenti nel corpus Futuro Fortissimo." />
  <meta name="twitter:image" content="https://futurofortissimo.github.io/logo.png" />

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=IBM+Plex+Mono:wght@600;700&family=Press+Start+2P&display=swap" rel="stylesheet">

  <style>
    :root {
      --ff-blue: #4a90e2;
      --ff-red: #d0021b;
      --ff-yellow: #f5a623;
      --ff-green: #2ecc71;
      --ff-black: #0a0a0a;
      --ff-grid: rgba(0, 0, 0, 0.03);
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: #fdfdfd;
      color: var(--ff-black);
      position: relative;
      min-height: 100vh;
      line-height: 1.6;
    }
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(var(--ff-grid) 1px, transparent 1px),
        linear-gradient(90deg, var(--ff-grid) 1px, transparent 1px);
      background-size: 32px 32px;
      pointer-events: none;
      z-index: -1;
    }
    h1, h2, h3, h4, h5, h6 {
      font-family: 'IBM Plex Mono', monospace;
      letter-spacing: 0.03em;
      text-transform: uppercase;
    }
    .pixel-title { font-family: 'Press Start 2P', monospace; letter-spacing: 0.05em; }
    .brutal-card {
      border: 4px solid var(--ff-black);
      background: #ffffff;
      box-shadow: 6px 6px 0 var(--ff-black);
      padding: 24px;
    }
    .accent-bar { position: relative; }
    .accent-bar::before {
      content: '';
      position: absolute;
      top: -4px; left: -4px; right: -4px;
      height: 10px;
      background: var(--ff-blue);
    }
    .accent-red::before { background: var(--ff-red); }
    .accent-yellow::before { background: var(--ff-yellow); }
    .accent-green::before { background: var(--ff-green); }
    .ff-eyebrow {
      font-family: 'IBM Plex Mono', monospace;
      font-size: 0.75rem;
      letter-spacing: 0.24em;
      text-transform: uppercase;
      font-weight: 700;
    }
    .ff-heading-xl {
      font-size: clamp(1.6rem, 1.2rem + 1vw, 2.2rem);
      line-height: 1.2;
      font-weight: 700;
    }
    .ff-body { font-size: 1rem; line-height: 1.65; }
    .ff-body-sm { font-size: 0.9375rem; line-height: 1.6; }
    .ff-button {
      font-family: 'IBM Plex Mono', monospace;
      font-size: 0.75rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      font-weight: 700;
    }
    .ff-caption {
      font-family: 'IBM Plex Mono', monospace;
      font-size: 0.75rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      font-weight: 700;
    }
    .no-round, .no-round * { border-radius: 0 !important; }
    a:focus-visible, button:focus-visible { outline: 3px solid var(--ff-black); outline-offset: 2px; }
    ::selection { background: #0a0a0a; color: #ffffff; }
  </style>
</head>
<body class="antialiased selection:bg-gray-900 selection:text-white no-round">

  <header class="bg-white" style="border-bottom: 4px solid var(--ff-black);">
    <div class="max-w-5xl mx-auto px-4 py-5 flex items-center justify-between gap-4">
      <div>
        <div class="ff-eyebrow" style="color: var(--ff-red);">Futuro Fortissimo — Temi</div>
        <h1 class="ff-heading-xl mt-1">Indice Macro-Temi</h1>
        <p class="ff-body-sm mt-1" style="color: #555;">Mappa rapida (automatica) dei temi ricorrenti nel corpus.</p>
      </div>
      <nav class="flex gap-4 flex-wrap justify-end">
        <a class="ff-eyebrow hover:underline" href="/index.html">Home</a>
        <a class="ff-eyebrow hover:underline" href="/book/">Libro</a>
        <a class="ff-eyebrow hover:underline" href="/themes.html">Temi</a>
        <a class="ff-eyebrow hover:underline" href="/connections.html">Connessioni</a>
        <a class="ff-eyebrow hover:underline" href="/note.html">Note</a>
      </nav>
    </div>
  </header>

  <main class="max-w-5xl mx-auto px-4 py-10">

    <!-- Info card -->
    <div class="brutal-card accent-bar">
      <div class="flex flex-wrap items-center justify-between gap-3">
        <div>
          <div class="ff-eyebrow" style="color: var(--ff-blue);">Generated</div>
          <div id="meta" class="ff-body-sm mt-1" style="color: #555;">Caricamento...</div>
        </div>
        <div class="ff-body-sm" style="color: #555;">Fonte: <code class="ff-caption" style="background: #f5f5f5; padding: 2px 8px; border: 2px solid var(--ff-black);">futuro_fortissimo_full_data.txt</code></div>
      </div>
    </div>

    <!-- Themes grid (JS-populated) -->
    <section class="mt-8 grid gap-6" id="themes"></section>

    <!-- Footer note -->
    <section class="mt-10 brutal-card accent-bar accent-yellow">
      <h2 class="text-base font-bold uppercase">Note</h2>
      <ul class="list-disc pl-5 mt-3 ff-body-sm space-y-2" style="color: #333;">
        <li>Questa classificazione è euristica (keyword). Serve per navigare, non per "verità".</li>
        <li>Se vuoi tassonomia "umana", la incrociamo con l'export Notion e la rifiniamo.</li>
      </ul>
    </section>

  </main>

  <script src="./analytics.js"></script>
  <script>
    const ACCENT_CYCLE = ['', 'accent-red', 'accent-yellow', 'accent-green'];

    async function load() {
      const res = await fetch('./generated/themes.json?ts=' + Date.now());
      const data = await res.json();

      const meta = document.getElementById('meta');
      meta.textContent = 'Issues: ' + data.totals.issues + ' \u00b7 Subchapters: ' + data.totals.subchapters + ' \u00b7 Updated: ' + new Date(data.generatedAt).toLocaleString();

      const root = document.getElementById('themes');
      root.innerHTML = '';

      const sorted = data.themes.sort((a, b) => b.count - a.count);

      sorted.forEach((t, i) => {
        const accentClass = ACCENT_CYCLE[i % 4];
        const colors = ['var(--ff-blue)', 'var(--ff-red)', 'var(--ff-yellow)', 'var(--ff-green)'];
        const eyebrowColor = colors[i % 4];

        const card = document.createElement('article');
        card.className = 'brutal-card accent-bar ' + accentClass;

        card.innerHTML =
          '<div class="flex items-start justify-between gap-4">' +
            '<div>' +
              '<div class="ff-eyebrow" style="color: ' + eyebrowColor + ';">' + t.key + '</div>' +
              '<h3 class="text-lg font-bold mt-2">' + t.name + '</h3>' +
              '<p class="ff-body-sm mt-2" style="color: #333;">Occorrenze (subchapters): <strong>' + t.count + '</strong></p>' +
            '</div>' +
            '<a class="ff-button underline flex-shrink-0" data-track="topic_open" href="#' + t.key + '">Link</a>' +
          '</div>' +
          '<div id="' + t.key + '" class="mt-4" style="border-top: 2px solid var(--ff-black); padding-top: 12px;">' +
            '<div class="ff-eyebrow" style="color: #888;">Esempi</div>' +
            '<ul class="mt-3 space-y-2">' +
              (t.samples || []).map(function(s) {
                return '<li class="ff-body-sm">' +
                  '<span style="color: var(--ff-black); font-weight: 600;">&bull;</span> ' +
                  '<a class="underline font-medium" href="' + s.url + '" target="_blank" rel="noopener">' + s.title + '</a> ' +
                  '<span class="ff-caption" style="color: #888;">' + (s.id || 'ff') + '</span>' +
                '</li>';
              }).join('') +
            '</ul>' +
          '</div>';

        root.appendChild(card);
      });
    }

    load().catch(function(err) {
      document.getElementById('meta').textContent = 'Errore caricamento.';
      console.error(err);
    });
  </script>
</body>
</html>
